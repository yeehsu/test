
<!DOCTYPE html>
<html lang="zh-CN">

<head>

<title>wangyishu 王轶庶</title>

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="description" content="王轶庶的个人网站">
<link rel="profile" href="http://gmpg.org/xfn/11">
<link rel="pingback" href="http://wangyishu.cc/xmlrpc.php">

<link rel='dns-prefetch' href='//s.w.org' />
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/11\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/11\/svg\/","svgExt":".svg","source":{"concatemoji":"http:\/\/wangyishu.cc\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.9.15"}};
			!function(a,b,c){function d(a,b){var c=String.fromCharCode;l.clearRect(0,0,k.width,k.height),l.fillText(c.apply(this,a),0,0);var d=k.toDataURL();l.clearRect(0,0,k.width,k.height),l.fillText(c.apply(this,b),0,0);var e=k.toDataURL();return d===e}function e(a){var b;if(!l||!l.fillText)return!1;switch(l.textBaseline="top",l.font="600 32px Arial",a){case"flag":return!(b=d([55356,56826,55356,56819],[55356,56826,8203,55356,56819]))&&(b=d([55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447],[55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447]),!b);case"emoji":return b=d([55358,56760,9792,65039],[55358,56760,8203,9792,65039]),!b}return!1}function f(a){var c=b.createElement("script");c.src=a,c.defer=c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var g,h,i,j,k=b.createElement("canvas"),l=k.getContext&&k.getContext("2d");for(j=Array("flag","emoji"),c.supports={everything:!0,everythingExceptFlag:!0},i=0;i<j.length;i++)c.supports[j[i]]=e(j[i]),c.supports.everything=c.supports.everything&&c.supports[j[i]],"flag"!==j[i]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[j[i]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(h=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",h,!1),a.addEventListener("load",h,!1)):(a.attachEvent("onload",h),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),g=c.source||{},g.concatemoji?f(g.concatemoji):g.wpemoji&&g.twemoji&&(f(g.twemoji),f(g.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel='stylesheet' id='style-name-css'  href='http://wangyishu.cc/wp-content/themes/COLr/style.css?ver=4.9.15' type='text/css' media='all' />
<script type='text/javascript' src='http://wangyishu.cc/wp-includes/js/jquery/jquery.js?ver=1.12.4'></script>
<script type='text/javascript' src='http://wangyishu.cc/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.4.1'></script>
<script type='text/javascript' src='http://wangyishu.cc/wp-content/themes/COLr/scripts/columnizer.js?ver=4.9.15'></script>
<script type='text/javascript' src='http://wangyishu.cc/wp-content/themes/COLr/scripts/touchwipe.js?ver=4.9.15'></script>
<script type='text/javascript' src='http://wangyishu.cc/wp-content/themes/COLr/scripts/mousewheel.js?ver=4.9.15'></script>
<link rel='https://api.w.org/' href='http://wangyishu.cc/wp-json/' />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://wangyishu.cc/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://wangyishu.cc/wp-includes/wlwmanifest.xml" /> 
<meta name="generator" content="WordPress 4.9.15" />
<link rel="canonical" href="http://wangyishu.cc/" />
<link rel='shortlink' href='http://wangyishu.cc/' />
<link rel="alternate" type="application/json+oembed" href="http://wangyishu.cc/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fwangyishu.cc%2F" />
<link rel="alternate" type="text/xml+oembed" href="http://wangyishu.cc/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fwangyishu.cc%2F&#038;format=xml" />
<style type='text/css'>body, #cover, body.mobile #menuback, body.mobile #fullMenu { background-color:#FFFFFF; }
#menu { background-color:rgba(255, 255, 255, 1); }
body { color:#000000; }
body { font-family:helvetica, arial, sans-serif; }
body { font-size:9.5pt; }
body { line-height:16pt; }
p { padding-bottom:16pt; }
::selection { background:#EEEEEE; }
::selection { color:#000000; }
#container .post .content a, #container .post .tagcat a, #container .post .commentHold a, #container .post .info a { color:#000000; }
#container .post .content a:hover, #container .post .tagcat a:hover, #container .post .commentHold a:hover, #container .post .info a:hover { color:#000000; }
a, #container .post .info .title a, #menu #title a { border-bottom:1px solid #FFFFFF; }
a:hover, #container .post .info .title a:hover, #menu #title a:hover { border-bottom:1px solid #000000; }
blockquote { color:#AAAAAA; }
blockquote { padding:10px; }
h1 { font-size:19pt; }
h1 { line-height:26pt; }
h2 { font-size:17pt; }
h2 { line-height:24pt; }
h3 { font-size:15pt; }
h3 { line-height:22pt; }
h4 { font-size:13pt; }
h4 { line-height:20pt; }
h5 { font-size:11pt; }
h5 { line-height:18pt; }
#menu { width:200px; }
#menu { padding-right:40px; }
#menu { padding-left:40px; }
#menu { padding-left:40px; }
#menu #title { margin-bottom:40px; }
#menu #title h1 a { color:#000000; }
#menu #title h1 a:hover { color:#000000; }
#menu #title h1 a { border-bottom:1px solid #FFFFFF; }
#menu #title h1 a:hover { border-bottom:1px solid #000000; }
#menu #title h1 { font-size:9.5pt; }
#menu #title h1 { line-height:16pt; }
#menu #nav>ul { margin-bottom:40px; }
#menu #nav ul li a { border-bottom:1px solid #FFFFFF; }
#menu #nav ul li a:hover { border-bottom:1px solid #000000; }
#menu #nav ul li a { font-size:9.5pt; }
#menu #nav ul li a { line-height:16pt; }
#menu #nav ul li a { color:#000000; }
#menu #nav ul li a:hover { color:#000000; }
#menu #description { margin-bottom:40px; }
#menu #nav ul li ul.children, #menu #nav ul li ul.sub-menu { margin-left:8px; }
#menu #nav ul.children li a.selected, #menu #nav ul.sub-menu li a.selected, #menu #nav ul li a.selected, #menu #nav ul li.current-cat a { border-bottom:1px solid #DDDDDD; }
#container .post .info .title a, #container .post .info .title { color:#000000; }
#container .post .info .title a { border-bottom:1px solid #FFFFFF; }
#container .post .info .title a:hover { border-bottom:1px solid #000000; }
#container, #menu { padding-top:40px; }
#container .post .info .section { margin-bottom:40px; }
body#default #container .post .info, body#vertical #container .post .info { font-size:9.5pt; }
body#default #container .post .info, body#vertical #container .post .info { line-height:16pt; }
#container .post .imageElement, #container .post .tagcat { margin-right:40px; }
#container .post .wp-caption .wp-caption-text { font-size:9.5pt; }
#container .post .wp-caption .wp-caption-text { color:#000000; }
body#fullScreen #menu #nav ul li a, body#fullScreen #title a { color:#000000; }
body#fullScreen #menu #nav ul li a, body#fullScreen #title a { border-bottom:1px solid #FFFFFF; }
body#fullScreen #menu #nav ul li a:hover, body#fullScreen #title a:hover { color:#000000; }
body#fullScreen #menu #nav ul li a:hover, body#fullScreen #title a:hover { border-bottom:1px solid #000000; }
body#fullScreen #foldOut, body#fullScreen #foldCover { background:#FFFFFF; }
body#fullScreen #foldOut, body#fullScreen #foldCover { width:200px; }
body#fullScreen #foldOut #hold { padding:40px; }
body#fullScreen #foldCover { height:40px; }
body#fullScreen #info { color:#FFFFFF; }
body#fullScreen #info { border:2px solid #FFFFFF; }
body#fullScreen #infoHold { padding:40px; }
body#gallery #thumbs img { width:200px; }
body#gallery #thumbs img { margin:0 40px 40px 0; }
#container #pagination a { color:#000000; }
#container #pagination a:hover { color:#000000; }
#container #pagination a { border-bottom:1px solid #FFFFFF; }
#container #pagination a:hover { border-bottom:1px solid #000000; }
body.mobile #nav-toggle span, body.mobile #nav-toggle span:before, body.mobile #nav-toggle span:after { background-color:#000000; }
body.mobile #fullMenu #nav ul li a { color:#000000; }
body.mobile #menuback { border-bottom:1px solid #AAAAAA; }
body.mobile *, body.mobile #container .post .wp-caption .wp-caption-text { font-size:14pt; }
body.mobile *, body.mobile #container .post .wp-caption .wp-caption-text { line-height:21pt; }
body#fullScreen #menu { background:#FFFFFF; }
body#fullScreen #arrow { color:#000000; }
body.slideshowTemplate #container .post .content { display:block; }
body.slideshowTemplate #container .post .info { display:block; }
body#gallery #thumbs .lbc { opacity:1; }
body#gallery #thumbs .lbc:hover { opacity:1; }
body#gallery #thumbs .lbc { transition: opacity 1s ease-in-out;-moz-transition: opacity 1s ease-in-out;-webkit-transition: opacity 1s ease-in-out; }
body#gallery #lightboxbackground { background:#FFFFFF; }
body#gallery #lightboxbackground { opacity:.9; }
body#gallery a#arr { color:#000000; }
#container { padding-left:280px; }
</style>
</head>
<body class="home page-template-default page page-id-422">

				<script type="text/javascript">
			defaultTheme = true;
			fullScreenT = false;
			textTemplate = false;
			galleryTemplate = false;
			slideshowTemplate = false;
		</script>
			
	<div id="container">

					
			<div class="post" class="post-422 page type-page status-publish hentry">
				<div class="info">
					<div class="title section">©All images copyrights Wang Yishu</div>
					<div class="extended section">23 四月 2018</div>
					<div class="clear"></div>
				</div>
				<div class="content">
					<p><div class="wp-caption"><img class="alignnone size-full wp-image-455" src="http://wangyishu.cc/wp-content/uploads/2018/05/J1A8512-6_调整大小.jpg" alt="" width="1200" height="769" /></div></p> <p>New Solo Exhibition at Toronto Osgoode Subway Station,  Courtesy of Scotiabank Contact Photography Festival</p> 				</div>
			</div>

			
				
		<div class="tracer"></div>
		<div class="clear"></div>

	</div>

	
		<div id="menu">
			<div id="title">
									<h1><a href="http://wangyishu.cc">wangyishu 王轶庶</a></h1>
							</div>
			<div id="description">
				王轶庶的个人网站			</div>
			<div id="mobileNav" style="display:none">
									<ul><div class="menu-menu-container"><ul id="menu-menu" class="menu"><li id="menu-item-165" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-165"><a href="#">PROJECTS</a>
<ul class="sub-menu">
	<li id="menu-item-166" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-166"><a href="http://wangyishu.cc/borderless-2016-2017/">Borderless 2016-2017</a></li>
	<li id="menu-item-253" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-253"><a href="http://wangyishu.cc/open-ending-2009-2015/">Open-Ending 2005-2015</a></li>
	<li id="menu-item-320" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-320"><a href="http://wangyishu.cc/return-2003-2005/">Return  2003-2005</a></li>
</ul>
</li>
<li id="menu-item-403" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-403"><a href="#"></p></a>
<ul class="sub-menu">
	<li id="menu-item-421" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-421"><a href="http://wangyishu.cc/book/">book</a></li>
	<li id="menu-item-394" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-394"><a href="http://wangyishu.cc/%e5%b1%95%e8%a7%88/">Installation views</a></li>
	<li id="menu-item-406" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-406"><a href="http://wangyishu.cc/bio/">Bio</a></li>
	<li id="menu-item-417" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-417"><a href="http://wangyishu.cc/contact/">Contact</a></li>
</ul>
</li>
<li id="menu-item-407" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-407"><a href="#"></p></a></li>
<li id="menu-item-397" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-397"><a href="http://wangyishu.cc/blog/">Art Review</a></li>
</ul></div></ul><ul><div class="textwidget custom-html-widget"><a href="https://www.instagram.com/yishuwang/" target="_blank" rel="noopener"><img class="alignnone wp-image-445" src="http://wangyishu.cc/wp-content/uploads/2018/04/timg-1.jpg" alt="" width="30" height="30" /></a></div></ul>							</div>
			<div id="nav">
				<ul><div class="menu-menu-container"><ul id="menu-menu-1" class="menu"><li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-165"><a href="#">PROJECTS</a>
<ul class="sub-menu">
	<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-166"><a href="http://wangyishu.cc/borderless-2016-2017/">Borderless 2016-2017</a></li>
	<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-253"><a href="http://wangyishu.cc/open-ending-2009-2015/">Open-Ending 2005-2015</a></li>
	<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-320"><a href="http://wangyishu.cc/return-2003-2005/">Return  2003-2005</a></li>
</ul>
</li>
<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-403"><a href="#"></p></a>
<ul class="sub-menu">
	<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-421"><a href="http://wangyishu.cc/book/">book</a></li>
	<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-394"><a href="http://wangyishu.cc/%e5%b1%95%e8%a7%88/">Installation views</a></li>
	<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-406"><a href="http://wangyishu.cc/bio/">Bio</a></li>
	<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-417"><a href="http://wangyishu.cc/contact/">Contact</a></li>
</ul>
</li>
<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-407"><a href="#"></p></a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-397"><a href="http://wangyishu.cc/blog/">Art Review</a></li>
</ul></div></ul><ul><div class="textwidget custom-html-widget"><a href="https://www.instagram.com/yishuwang/" target="_blank" rel="noopener"><img class="alignnone wp-image-445" src="http://wangyishu.cc/wp-content/uploads/2018/04/timg-1.jpg" alt="" width="30" height="30" /></a></div></ul>			</div>
		</div>
		
		<div id="cover"></div>	
<script type="text/javascript">
		(function($) {
heightSubtract = 190;
colWidth = 200;
colMargin = 40;
menuWidth = 200;
menuMargin = 40;
menuMarginLeft = 40;
menuState = 'absolute';
navOffset = menuWidth + menuMargin + menuMarginLeft - (colMargin*2);
dynamicResize = true;
hideChildren = false;
showPathTo = true;						//default: true
resizeITo = 'none';
mouseWheel = false;
keyNav = true;
trackPos = true;						//default: true
autoAdvance = false;
returnScroll = false;
prevText = '→';
nextText = '←';
titlePos = false;

//mobile template
mobileOn = true;
mobileresizeIToWidth = "none";			//default: "none", other options: "max", numerical value
mobileresizeIToHeight = "none";			//default: "none", other options: "max", numerical value
touchWipe = false;						//default: false
tapAdvance = false;						//default: false

//fullscreen template
clickThrough = false;
clickAdvance = 'forward';
fullAuto = false;
fullAutoSpeed = 6000;
showArrows = true;
showmb = true;
fullscreenInfoShow = false;
fullscreenInfoWidth = 200;
fullscreenInfoPadding = 40;

//text template
pageWidth = 800;
minPageWidth = 400;
adaptiveScale = true;

//slideshow template
showText = true;
slideAuto = false;
slideAutoSpeed = 6000;
advanceSpeed = 500;
slideshowClickThrough = true;

//gallery template
imgWidth = 200;
imgMargin = 40;
lightboxheight = 0.8;
overviewSlideShow = false;

function UtilityHasTouch(){    
	var agent   = navigator.userAgent;
	if(agent.match(/(iPhone|iPod|Blackberry|Android)/)){
		return true;
	}else{
		return false;
	}
}

if(mobileOn && UtilityHasTouch()){
	mobile = true;
}else{
	mobile = false;
}

//mobile template
if(mobile){

	//reset options for mobile
	heightSubtract = 120;
	colWidth = 300;
	colMargin = 30;
	menuWidth = 0;
	menuMargin = 0;
	menuMarginLeft = 0;
	menuState = 'absolute';
	navOffset = menuWidth + menuMargin + menuMarginLeft - (colMargin*2);
	lazyLoad = false;
	dynamicResize = true;
	resizeITo = 'none';

	//text template
	pageWidth = 1000;

	minPageWidth = 100;

	/*
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		On load functions ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
	*/

	$(document).ready(function(){

		$(".wp-caption").css("width","auto");

		$("#nav").hide();
		$("body").addClass("mobile");

		//add menu link
		$("body").append("<div id='menuback'></div>");
		$("body").append("<div id='fullMenu' style='display:none;width:200px;'><div id='inf' style='width:200px;'></div></div>");
		$("body").append('<a id="nav-toggle" href="#"><span></span></a>');
		$("body").append("<div id='menuTitle'><div class='inner'>"+$("#title").html()+"</div></div>");
		if($("#mobileNav").length > 0){
			$("#mobileNav").show().appendTo("#inf");
			$("#nav").hide();
		}else{
			$("#nav").show().appendTo("#inf");
		}

		//setup menu functions				
		$("#nav-toggle").click(function(){
			this.classList.toggle("active");
			l = $(window).scrollLeft();
			if($("#fullMenu").is(":hidden")){
				$("#fullMenu").stop().animate({ width: 'toggle'});
			}else{
				$("#fullMenu").stop().animate({ width: 'toggle'});
			}
		});
		
		//remove br
		$(".content").each(function(){
			//$('img, .wp-caption').nextUntil(':not(br)').remove();
		});

	});

}
//default template
if(defaultTheme && !mobile){
	/*
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		On load functions ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
	*/

	$(document).ready(function(){
	
		var agent = navigator.userAgent;
		if(agent.match(/(iPad)/)){
			$("meta[name='viewport']").attr("content", "minimum-scale=1.0, height=device-height");
		}

		h = $(window).height() - heightSubtract;
		
		if(h < 250){
			h = 250;
		}
	
		$("body").attr("id","default");
	
		$(".wp-caption").css("width","auto");

		$(".post").each(function(){
			//set active
			$(this).find(".content").addClass("	active");
			//wrap unwrapped text nodes
			var textnodes = getTextNodesIn($(this).find(".content")[0]);
			for(var i=0; i < textnodes.length; i++){
				if($(textnodes[i]).parent().is(".content")){
					$(textnodes[i]).wrap("<p>");
				}
			}
			//separate images & videos
			$(this).find("img,iframe,video,object").not(".inColumn").each(function(i){
				if($(this).parents(".wp-caption").length > 0){
					$("<div class='content next'>").insertAfter(".active").append($(this).parents(".wp-caption").nextAll());
					$(".active").removeClass("active");
					$("<div class='imageElement' width='"+$(this).attr("width")+"' height='"+$(this).attr("height")+"'>").insertBefore(".next").append($(this).parents(".wp-caption"));
					$(".next").removeClass("next").addClass("active");
				}else if($(this).parents("a").length > 0){ 
					$("<div class='content next'>").insertAfter(".active").append($(this).parents("a").nextAll());
					$(".active").removeClass("active");
					$("<div class='imageElement' width='"+$(this).attr("width")+"' height='"+$(this).attr("height")+"'>").insertBefore(".next").append($(this).parents("a"));
					$(".next").removeClass("next").addClass("active");
				}else{
					$("<div class='content next'>").insertAfter(".active").append($(this).nextAll());
					$(".active").removeClass("active");
					$("<div class='imageElement' width='"+$(this).attr("width")+"' height='"+$(this).attr("height")+"'>").insertBefore(".next").append($(this));
					$(".next").removeClass("next").addClass("active");	
				}
			});
			//remove empty .content divs
			$(this).find(".content").each(function(){
				if(jQuery.trim($(this).text()) == "") $(this).remove();
			});
			//remove empty text elements
			$(this).find("p,blockquote,h1,h2,h3,h4,h5").each(function(){
				if(jQuery.trim($(this).text()) == "" && $(this).parents("#respond").length <= 0 && $(this).find("input").length <= 0) $(this).remove();
			});
			//remove .active
			$(".active").removeClass("active");
			//assign .ie
			$(".imageElement, .column, #container").addClass("ie");
		});

		//stylize links
		$("img").each(function(){
			if($(this).parent().is("a")){
				$(this).parent().css("border","0");
			}
		});

		//insert line break after paragraph tag
		$(".content").find("p").after("<br />");

		//resize images, columnize, determine width
		calibrate("initial");

		//hide children
		if(hideChildren){
			$("#nav").find(".children, .sub-menu").each(function(){
				//if($(this).parents(".current-page-parent").length < 1) $(this).hide();
				if(!$(this).parent().parent().is(".current-page-parent")) $(this).hide();
			});
			$(".children").each(function(){
				$(this).parent().find("a").eq(0).attr("href","javascript:void(0)").click(function(){
					$(this).parent().find(".children").eq(0).slideToggle();
				});
			});
			$(".sub-menu").each(function(){
				$(this).parent().find("a").eq(0).attr("href","javascript:void(0)").click(function(){
					$(this).parent().find(".sub-menu").eq(0).slideToggle();
				});
			});
			$(".current_page_parent, .current_page_item, .current_menu_item").each(function(){
				$(this).find("a").eq(0).addClass("selected");
			});
			if(showPathTo){
				$(".current_page_parent, .current_page_item, .current_menu_item, .current_page_ancestor, .current-cat-parent").each(function(){
					$(this).find(".children, .sub-menu").eq(0).show();
				});
				$(".current_page_parent, .current_page_item, .current_menu_item, .current_page_ancestor").show();
			}
		}

		$("#cover").fadeOut();
		$("#container").animate({
			"opacity":1
		});
	});

	hasLoaded = 0;
	$(window).load(function(){
		//set width
		$("#container").width($(".tracer").offset().left-navOffset-colMargin);
		$("body").width($(".tracer").offset().left);
		hasLoaded = 1;
	});

	/*
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		On resize functions ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
	*/

	$(window).resize(function(){
		if(dynamicResize){
			h = $(window).height() - heightSubtract;
			if(h < 250){
				h = 250;
			}
			$("body, #container").width(9999999);
			calibrate();
		}
	});

	/*
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		Calibrate Function  ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
	*/

	function calibrate(type){
		if(typeof(type)==='undefined') a = "secondary";
		//set videos
		$(".mejs-container").each(function(){
			var attr = $(this).attr('width');
			if (typeof attr == typeof undefined || attr == false) {
				$(this).attr('width',$(this).find("video").attr("width"));
			}
			var attr = $(this).attr('height');
			if (typeof attr == typeof undefined || attr == false) {
				$(this).attr('height',$(this).find("video").attr("height"));
			}
		});
		//resize images and videos
		$(".post").find("img,video,object,embed,iframe,.mejs-container").not(".inColumn").each(function(){
	
			if(resizeITo == "none"){
				newHeight = h;
			}else if(resizeITo == "max"){
				if(h > $(this).attr("height")){
					newHeight = $(this).attr("height");
				}else{
					newHeight = h;
				}
			}else{
				newHeight = resizeITo;
			}
		
			height = $(this).attr("height");
			width = $(this).attr("width");
			heightRatio = newHeight/height;
			$(this).height(newHeight).width(width*heightRatio);
			$(this).parents(".wp-caption").width(width*heightRatio);
		});
		if(titlePos){
			$(".info").css("top",h+100+"px");
		}
		if(type == "initial"){ //if first run-through
			//columnize
			$(".content,#commentsList").each(function(){
				var $tc = $(this);
				$tc.columnize({
					buildOnce:true,
					doneFunc: function(){
						rebuildColumns($tc,type);
					},
					height:h,
					width:colWidth
				});
			});
		}else{ //if resize
			//reset
			$(".content,.column,#commentsList").css("float","none");
			$(".column").contents().unwrap();
			$(".column").remove();
			if($("#container").find("img,video,object,embed,iframe").length > 0) $(".content").css('width', 'auto');
			$("body,#container").width(999999);
			$(".ie").removeClass("ie");
			//combine split
			$(".split").each(function(){
				if($(this).next().is(".split") && $(this).next().is($(this).get(0).tagName)){
					$(this).contents().prependTo($(this).next());
					$(this).remove();
				}
			});
			//columnize
			$(".content,#commentsList").each(function(){
				var $tc = $(this);
				$tc.columnize({
					buildOnce:true,
					doneFunc: function(){
						rebuildColumns($tc,type);
					},
					height:h,
					width:colWidth
				});
			});
		}
		if($(".content").length <= 0){
			$(".imageElement, .column, #container").addClass("ie");
			if((dynamicResize && type != "initial") || hasLoaded == 1){
				//set width
				$("#container").width($(".tracer").offset().left-navOffset-colMargin);
				$("body").width($(".tracer").offset().left);
			}
		}
		$(".column").width(colWidth).css("margin-right",colMargin+"px");
	}
	function rebuildColumns(t,type){
		$("body,#container").width(999999);
		//delete empty columns
		t.find(".column").each(function(){
			if(jQuery.trim($(this).text()) == "") $(this).remove();
			if($(this).children(":first").is("br")) $(this).children(":first").remove();
		});
		//reset widths
		t.find(".column").width(colWidth).css("margin-right",colMargin+"px");
		t.each(function(){
			numCol = $(this).children(".column").length;
			$(this).width((numCol*colWidth) + (numCol*colMargin));
		});
		//reset floats
		t.find(".column").css("float","left");
		t.css("float","left");
		//assign .ie class
		$(".imageElement, .column, #container").addClass("ie");
	
		$(".post").each(function(){
			if($(this).find(".content,.imageElement").length < 1){
				$(this).append("<div style='height:1px;width:"+colWidth+"px;'></div>");
			}
		});
	
		if((dynamicResize && type != "initial") || hasLoaded == 1){
			//set width
			$("#container").width($(".tracer").offset().left-navOffset-colMargin);
			$("body").width($(".tracer").offset().left);
		}
	}

	/*
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		Wrap un-wrapped Text Nodes  ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		Function comes from Arash Milani  ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		stackoverflow.com/questions/13836633/jquery-wrap-all-unwrapped-text-in-p-tags
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
	*/

	function getTextNodesIn(node, includeWhitespaceNodes) { 
		var textNodes = [], whitespace = /^\s*$/;
		function getTextNodes(node) {
			if (node.nodeType == 3) {
				if (includeWhitespaceNodes || !whitespace.test(node.nodeValue)) {
					textNodes.push(node);
				}
			}else{
				for(var i = 0, len = node.childNodes.length; i < len; ++i) {
					getTextNodes(node.childNodes[i]);
				}
			}
		}
		getTextNodes(node);
		return textNodes;
	}

	/*
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		Map mousewheel to horizontal scroll   ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		Function comes from Andy E  ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		http://stackoverflow.com/questions/2346958/how-to-do-a-horizontal-scroll-on-mouse-wheel-scroll
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
	*/

	if(mouseWheel){
		/*var mouseWheelEvt = function(e){
			var event = e || window.event;
			if (document.body.doScroll) document.body.doScroll(event.wheelDelta>0?"left":"right");
			else if ((event.wheelDelta || event.detail) > 0) document.body.scrollLeft -= 10;
			else document.body.scrollLeft += 10;
			return false;
		}
		if("onmousewheel" in document.body) document.body.onmousewheel = mouseWheelEvt;
		else document.body.addEventListener("DOMMouseScroll", mouseWheelEvt);*/
		
		$("html,body").mousewheel(function(event, delta) {
			event.preventDefault();
			this.scrollLeft -= (delta*5);
		});
		
		/*(function() {
			function scrollHorizontally(e) {
				e = window.event || e;
				var delta = Math.max(-1, Math.min(1, (e.wheelDelta || -e.detail)));
				document.documentElement.scrollLeft -= (delta*20);
				document.body.scrollLeft -= (delta*20);
				e.preventDefault();
			}
			if (window.addEventListener) {
				// IE9, Chrome, Safari, Opera
				window.addEventListener("mousewheel", scrollHorizontally, false);
				// Firefox
				window.addEventListener("DOMMouseScroll", scrollHorizontally, false);
			} else {
				// IE 6/7/8
				window.attachEvent("onmousewheel", scrollHorizontally);
			}
		})();*/
	}

	/*
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		Keypress Navigation   ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
	*/

	if(keyNav){
		$(document).keydown(function(e){
			if (e.keyCode == 37) {  //left
				moveLeft();
				return false;
			}
			if (e.keyCode == 39) {  //right
				moveRight();
				return false;
			}
		});
	}

	/*
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		Move Functions  ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
	*/

	//initialize current position
	if(menuState == "absolute"){
		curr = 0;
	}else{
		curr = 1;
	}

	//track position on page scroll
	if(trackPos){
		$(window).scroll(function(){
			navOffset2 = menuWidth + menuMargin + menuMarginLeft;
			if(menuState == "absolute") navOffset2 = 0;
			leftPos = $(window).scrollLeft()+navOffset2;
			if(menuState == "absolute") leftPos +=colMargin;
			closest = 0;
			dist = 999999;
			$(".ie").each(function(i){
				if(Math.abs($(".ie").eq(i).offset().left - leftPos) < dist){
					dist = Math.abs($(".ie").eq(i).offset().left - colMargin - leftPos);
					closest = i;
				}
			});
			curr = closest;
		});
	}

	moving = 0;
	function moveLeft(){
		if((curr > 0 && menuState == "absolute") || (curr > 1 && menuState == "fixed")){
			curr--;
			if(menuState == "absolute"){
				if(moving == 0){
					moving = 1;
					$("body,html").animate({
						"scrollLeft": $(".ie").eq(curr).offset().left - colMargin
					},function(){
						moving = 0;
					});
				}
			}else{
				if(moving == 0){
					moving = 1;
					$("body,html").animate({
						"scrollLeft": $(".ie").eq(curr).offset().left - menuMarginLeft - menuWidth - menuMargin
					},function(){
						moving = 0;
					});
				}
			}
		}else{
			if(autoAdvance){
				$("#pagination").find("a").each(function(){
					if($(this).text() == nextText) document.location.href = $(this).attr("href");
				});
			}
			if(returnScroll){
				curr = $(".ie").length - 1;
				if(menuState == "absolute"){
					if(moving == 0){
						moving = 1;
						$("body,html").animate({
							"scrollLeft": $(".ie").eq(curr).offset().left - colMargin
						},function(){
							moving = 0;
						});
					}
				}else{
					if(moving == 0){
						moving = 1;
						$("body,html").animate({
							"scrollLeft": $(".ie").eq(curr).offset().left - menuMarginLeft - menuWidth - menuMargin
						},function(){
							moving = 0;
						});
					}
				}
			}
		}
	}
	function moveRight(){
		/*if(curr < $(".ie").length){*/
		/*if(($(".ie").eq(curr).offset().left + $(window).width()) < ($("#container").width() + $(".post").eq(0).offset().left)){ //changed to move at end, not at last element*/
		if(($(window).scrollLeft() + $(window).width() + (colMargin*2)) < ($("#container").width() + $(".post").eq(0).offset().left)){
			if($(".ie").eq(curr+1).length > 0){
				curr++;
				if(menuState == "absolute"){
					if(moving == 0){
						moving = 1;
						$("body,html").animate({
							"scrollLeft": $(".ie").eq(curr).offset().left - colMargin
						},function(){
							moving = 0;
						});
					}
				}else{
					if(moving == 0){
						moving = 1;
						$("body,html").animate({
							"scrollLeft": $(".ie").eq(curr).offset().left - menuMarginLeft - menuWidth - menuMargin
						},function(){
							moving = 0;
						});
					}
				}
			}
		}else{
			if(autoAdvance){
				$("#pagination").find("a").each(function(){
					if($(this).text() == prevText) document.location.href = $(this).attr("href");
				});
			}
			if(returnScroll){
				if(menuState == "absolute"){ curr = 0; }else{ curr = 1; }
				if(menuState == "absolute"){
					if(moving == 0){
						moving = 1;
						$("body,html").animate({
							"scrollLeft": $(".ie").eq(curr).offset().left - colMargin
						},function(){
							moving = 0;
						});
					}
				}else{
					if(moving == 0){
						moving = 1;
						$("body,html").animate({
							"scrollLeft": $(".ie").eq(curr).offset().left - menuMarginLeft - menuWidth - menuMargin
						},function(){
							moving = 0;
						});
					}
				}
			}
		}
	}
}
//fullscreen template
if(fullScreenT && !mobile){

	/*
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		Onload Functions  ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
	*/

	$(document).ready(function(){

		$(".wp-caption").css("width","auto");

		h = $(window).height();
		w = $(window).width();

		$("<div id='images' />").insertBefore("#menu");
		$("body").attr("id","fullScreen");

		$(".post").each(function(){
			//separate images & videos
			$(this).find("img,iframe,video,object").each(function(i){
				if(clickThrough){
					permalink = $("#title").find("a").attr("href");
					$(this).appendTo("#images").wrap("<a class='se' href='"+permalink+"' />").hide();
				}else{
					$(this).appendTo("#images").addClass("se").hide();
				}
			});
		});
		
		if(fullscreenInfoShow){
			totalWidth = fullscreenInfoWidth+(fullscreenInfoPadding*2);
			
			$("body").append("<div id='foldOut'><div id='hold'></div></div>");
			$("body").append("<div id='foldCover'>&nbsp;</div>");
			$("body").append("<div id='infoHold'><div id='info'><div>i</div></div></div>");
			$(".content").find("p").each(function(){
				if(jQuery.trim($(this).text()) == "" && $(this).find("input").length < 1) $(this).remove();
			});
			$("#hold").html($(".content").html());
			$("#foldOut,#foldCover").width(0).show();
			
			$("#foldOut,#info,#infoHold").mousemove(function(){
				$("#arrow").hide();
			});
			
			$("#info").click(function(){
				if($(this).hasClass("close")){
					$(this).removeClass("close").html("<div>i</div>");
					$('#foldOut,#foldCover').animate({ width: 0 });
					$("#infoHold").animate({ "right": 0 });
				}else{
					$(this).addClass("close").html("<div>&times;</div>");
					$('#foldOut,#foldCover').animate({ width: totalWidth });
					$("#infoHold").animate({ "right": totalWidth });
				}
			});
		}

		$(".se").eq(0).show();
		$(".se").eq(0).find("img").show();

		/*
			~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
			~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
			~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
			Keypress Navigation   ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~
			~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
			~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
			~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		*/

		if(keyNav){
			$(document).keydown(function(e){
				if (e.keyCode == 37) {  //left
					advLeft();
					return false;
				}
				if (e.keyCode == 39) {  //right
					advRight();
					return false;
				}
			});
		}

		/*
			~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
			~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
			~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
			Click Advance ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~
			~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
			~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
			~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		*/

		if(clickAdvance != "none"){
			currPos = 0;
			$(".se").addClass("cursor");

			if(showArrows){
				$(".se").addClass("arrow");
				$("body").append("<div id='arrow' />");
				if(clickAdvance == "half"){
					$(".se").mousemove(function(e){
						if(showmb){
							if(e.pageX > (($(window).width() - $("#menu").outerWidth())/2)+$("#menu").outerWidth()){		
								$("#arrow").html("&rarr;").css("left",e.pageX+"px").css("top",e.pageY+20+"px").show();
							}else{
								$("#arrow").html("&larr;").css("left",e.pageX+"px").css("top",e.pageY+20+"px").show();
							}
						}else{
							if(e.pageX > $(window).width()/2){		
								$("#arrow").html("&rarr;").css("left",e.pageX+"px").css("top",e.pageY+20+"px").show();
							}else{
								$("#arrow").html("&larr;").css("left",e.pageX+"px").css("top",e.pageY+20+"px").show();
							}
						}
					});
				}
				if(clickAdvance == "forward"){
					$(".se").mousemove(function(e){
						$("#arrow").html("&rarr;").css("left",e.pageX+"px").css("top",e.pageY+20+"px").show();
					});
				}
				$("#menu").mousemove(function(){
					$("#arrow").hide();
				});
			}

			if(clickAdvance == "half"){
				$(".se").click(function(e){
					if(e.pageX < $(window).width()/2){
						advLeft();
					}else{
						advRight();
					}
				});
			}
			if(clickAdvance == "forward"){
				$(".se").click(function(){
					advRight();
				});
			}
		}
		
		if(fullAuto){
			fullscreenInt = setInterval(function(){ advRight(); },fullAutoSpeed);
		}

		function advRight(){
			if(currPos < $(".se").length-1){
				$(".se").eq(currPos).hide();
				currPos++;
				$(".se").eq(currPos).show();
			}else{
				$(".se").eq(currPos).hide();
				currPos=0;
				$(".se").eq(currPos).show();
			}
			if(fullAuto){
				clearInterval(fullscreenInt);
				fullscreenInt = setInterval(function(){ advRight(); },fullAutoSpeed);
			}
		}
		function advLeft(){
			if(currPos > 0){
				$(".se").eq(currPos).hide();
				currPos--;
				$(".se").eq(currPos).show();
			}else{
				$(".se").eq(currPos).hide();
				currPos = $(".se").length-1;
				$(".se").eq(currPos).show();
			}
			if(fullAuto){
				clearInterval(fullscreenInt);
				fullscreenInt = setInterval(function(){ advRight(); },fullAutoSpeed);
			}
		}

		$("#container").hide();

		//stylize links
		$("img").each(function(){
			if($(this).parent().is("a")){
				$(this).parent().css("border","0");
			}
		});

		//hide children
		if(hideChildren){
			$("#nav").find(".children, .sub-menu").each(function(){
				if($(this).parents(".current-page-parent").length < 1) $(this).hide();
			});
			$(".children").each(function(){
				$(this).parent().find("a").eq(0).attr("href","javascript:void(0)").click(function(){
					$(this).parent().find(".children").eq(0).slideToggle();
				});
			});
			$(".sub-menu").each(function(){
				$(this).parent().find("a").eq(0).attr("href","javascript:void(0)").click(function(){
					$(this).parent().find(".sub-menu").eq(0).slideToggle();
				});
			});
			$(".current_page_parent, .current_page_item, .current_menu_item").each(function(){
				$(this).find("a").eq(0).addClass("selected");
			});
			if(showPathTo){
				$(".current_page_parent, .current_page_item, .current_menu_item, .current_page_ancestor, .current-cat-parent").each(function(){
					$(this).find(".children, .sub-menu").eq(0).show();
				});
				$(".current_page_parent, .current_page_item, .current_menu_item, .current_page_ancestor").show();
			}
		}

		resizeImagesAndBody();

		$("#cover").fadeOut();
		$("#container").animate({
			"opacity":1
		});
	});

	/*
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		Window Resize ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
	*/

	$(window).resize(function(){
		resizeImagesAndBody();
	});

	function resizeImagesAndBody(){
		$("body,#container").width($(window).width()).height($(window).height());
		if(showmb) $("#images").css("margin-left",$("#menu").outerWidth()+"px");
		$("#images").find("img,iframe,video,object").each(function(i){
			oh = $(this).attr("height");
			ow = $(this).attr("width");
			wh = $(window).height();
			ww = $(window).width();
			if(showmb) ww = ww - $("#menu").outerWidth();
			wr = ww/ow;
			hr = wh/oh;
			if(wr > hr){
				nw = ow * wr;
				nh = oh * wr;
				ml = 0;
				mt = -1*((nh - $(window).height())/2);
				$(this).width(nw).height(nh).css("margin",mt+"px 0 0 "+ml+"px");
			}else{
				nw = ow * hr;
				nh = oh * hr;
				mt=0;
				ml = -1*((nw - $(window).width())/2);
				if(showmb) ml = -1*((nw - ($(window).width() - $("#menu").outerWidth()))/2);
				$(this).width(nw).height(nh).css("margin",mt+"px 0 0 "+ml+"px");
			}
		});
	}

}
//text template
if(textTemplate || mobile){

	/*
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		Onload Functions  ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
	*/

	$(document).ready(function(){

		$(".wp-caption").css("width","auto");

		$("body").attr("id","vertical");
	
		if($(".woocommerce").length < 1){
			$(".post").each(function(){
				//wrap unwrapped text nodes
				var textnodes = getTextNodesIn($(this).find(".content")[0]);
				for(var i=0; i < textnodes.length; i++){
					if($(textnodes[i]).parent().is(".content")){
						$(textnodes[i]).wrap("<p>");
					}
				}
			});
		}

		//stylize links
		$("img").each(function(){
			if($(this).parent().is("a")){
				$(this).parent().css("border","0");
			}
		});

		//hide children
		if(hideChildren){
			$("#nav, #mobileNav").find(".children, .sub-menu").each(function(){
				if($(this).parents(".current-page-parent").length < 1) $(this).hide();
			});
			$(".children").each(function(){
				$(this).parent().find("a").eq(0).attr("href","javascript:void(0)").click(function(){
					$(this).parent().find(".children").eq(0).slideToggle();
				});
			});
			$(".sub-menu").each(function(){
				$(this).parent().find("a").eq(0).attr("href","javascript:void(0)").click(function(){
					$(this).parent().find(".sub-menu").eq(0).slideToggle();
				});
			});
			$(".current_page_parent, .current_page_item, .current_menu_item").each(function(){
				$(this).find("a").eq(0).addClass("selected");
			});
			if(showPathTo){
				$(".current_page_parent, .current_page_item, .current_menu_item, .current_page_ancestor, .current-cat-parent").each(function(){
					$(this).find(".children, .sub-menu").eq(0).show();
				});
				$(".current_page_parent, .current_page_item, .current_menu_item, .current_page_ancestor").show();
			}
		}

		resizeImagesAndBodyBlog();
	
		$("p").each(function(){
			if(jQuery.trim($(this).text()) == "" && $(this).find("input").length < 1) $(this).remove();
		});

		$("#cover").fadeOut();
		$("#container").animate({
			"opacity":1
		});
	});

	$(window).resize(function(){
		resizeImagesAndBodyBlog();
	});

	function getTextNodesIn(node, includeWhitespaceNodes) { 
		var textNodes = [], whitespace = /^\s*$/;
		function getTextNodes(node) {
			if (node.nodeType == 3) {
				if (includeWhitespaceNodes || !whitespace.test(node.nodeValue)) {
					textNodes.push(node);
				}
			}else{
				for(var i = 0, len = node.childNodes.length; i < len; ++i) {
					getTextNodes(node.childNodes[i]);
				}
			}
		}
		getTextNodes(node);
		return textNodes;
	}

	function resizeImagesAndBodyBlog(){
		if(mobile) pageWidth = ($(window).width() - $(".post").offset().left - colMargin);
		if(!mobile){
			$(".post").find("img,iframe,video,object").each(function(){

				$(this).addClass("ie");

				iw = $(this).attr("width");
				ih = $(this).attr("height");

				if(adaptiveScale && ($(window).width() - $(".post").offset().left - colMargin) <= pageWidth){
					if(($(window).width() - $(".post").offset().left - colMargin) > minPageWidth){
						nw = $(window).width() - $(".post").offset().left - colMargin;
					}else{
						nw = minPageWidth;
					}
				}else{
					nw = pageWidth;
				}

				r = nw/iw;

				if(iw >= nw){ $(this).width(nw).height(r*ih); }

			});
		}else{
			$(".post").find("iframe,video,object").each(function(){

				$(this).addClass("ie");

				iw = $(this).attr("width");
				ih = $(this).attr("height");

				if(adaptiveScale && ($(window).width() - $(".post").offset().left - colMargin) <= pageWidth){
					if(($(window).width() - $(".post").offset().left - colMargin) > minPageWidth){
						nw = $(window).width() - $(".post").offset().left - colMargin;
					}else{
						nw = minPageWidth;
					}
				}else{
					nw = pageWidth;
				}

				r = nw/iw;

				if(iw >= nw){ $(this).width(nw).height(r*ih); }

			});
			$(".post img").addClass("ie");
		}

		if(adaptiveScale && ($(window).width() - $(".post").offset().left - colMargin) <= pageWidth){
			if(($(window).width() - $(".post").offset().left - colMargin) > minPageWidth){
				pw = $(window).width() - $(".post").offset().left - colMargin;
			}else{
				pw = minPageWidth;
			}
		}else{
			pw = pageWidth;
		}

		$("#container,.post").width(pw);
		$("body").width(pw+$(".post").offset().left);
	}

}
//slideshow template
if(slideshowTemplate && !mobile){
	/*
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		On load functions ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
	*/

	$(document).ready(function(){

		h = $(window).height() - heightSubtract;
	
		if(mobileOn && UtilityHasTouch()){
			$("body").attr("id","default").attr("class","slideshowTemplate mobile");
		}else{
			$("body").attr("id","default").attr("class","slideshowTemplate");
		}
	
		$(".wp-caption").css("width","auto");
	
		//set images
		$(".content").find(".wp-caption").hide();
		//move/reset images
		$(".content").find(".wp-caption").appendTo(".images");
		$(".images").find(".wp-caption").eq(0).show();
	
		//clickthrough
		if(slideshowClickThrough){
			$(".images").find(".wp-caption").find("a").attr("href","javascript:void(0)").attr("class","clickable");
			$(".images").find(".wp-caption").click(function(){
				moveRightsl();
			});
		}
	
		//set info
		$(".info").width(500);

		//stylize links
		$("img").each(function(){
			if($(this).parent().is("a")){
				$(this).parent().css("border","0");
			}
		});

		//resize images, columnize, determine width
		calibrateS("initial");

		//hide children
		if(hideChildren){
			$("#nav").find(".children, .sub-menu").each(function(){
				if($(this).parents(".current-page-parent").length < 1) $(this).hide();
			});
			$(".children").each(function(){
				$(this).parent().find("a").eq(0).attr("href","javascript:void(0)").click(function(){
					$(this).parent().find(".children").eq(0).slideToggle();
				});
			});
			$(".sub-menu").each(function(){
				$(this).parent().find("a").eq(0).attr("href","javascript:void(0)").click(function(){
					$(this).parent().find(".sub-menu").eq(0).slideToggle();
				});
			});
			$(".current_page_parent, .current_page_item, .current_menu_item").each(function(){
				$(this).find("a").eq(0).addClass("selected");
			});
			if(showPathTo){
				$(".current_page_parent, .current_page_item, .current_menu_item, .current_page_ancestor, .current-cat-parent").each(function(){
					$(this).find(".children, .sub-menu").eq(0).show();
				});
				$(".current_page_parent, .current_page_item, .current_menu_item, .current_page_ancestor").show();
			}
		}
		
		slideshowSetContent();
		
		if(slideAuto){
			slideshowInt = setInterval(function(){ moveRightsl(); },slideAutoSpeed);
		}

		$("#cover").fadeOut();
		$("#container").animate({
			"opacity":1
		});
	});

	hasLoaded = 0;
	$(window).load(function(){
		//set width
		$("#container").width($(".tracer").offset().left-navOffset-colMargin);
		$("body").width($(".tracer").offset().left);
		hasLoaded = 1;
	});

	/*
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		On resize functions ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
	*/

	$(window).resize(function(){
		if(dynamicResize){
			h = $(window).height() - heightSubtract;
			$("body, #container").width(9999999);
			calibrateS();
			slideshowSetContent();
		}
	});

	/*
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		Calibrate Function  ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
	*/

	function calibrateS(type){
		if(typeof(type)==='undefined') a = "secondary";
		//resize images and videos
		$(".post").find("img,video,object,embed,iframe").each(function(){
	
			if(resizeITo == "none"){
				newHeight = h;
			}else if(resizeITo == "max"){
				if(h > $(this).attr("height")){
					newHeight = $(this).attr("height");
				}else{
					newHeight = h;
				}
			}else{
				newHeight = resizeITo;
			}
		
			height = $(this).attr("height");
			width = $(this).attr("width");
			heightRatio = newHeight/height;
			$(this).height(newHeight).width(width*heightRatio);
		});
		if(titlePos){
			$(".info").css("top",h+100+"px");
		}
		$("#container").width($(".tracer").offset().left-navOffset-colMargin);
		$("body").width($(".tracer").offset().left);
	}
	
	/*
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		Set Content   ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
	*/
	
	function slideshowSetContent(){
		if(showText){
			ssw = pageWidth;
			if( ($(window).width() - menuWidth - menuMargin - colMargin - menuMarginLeft) < pageWidth){
				ssw = $(window).width() - menuWidth - menuMargin - colMargin - menuMarginLeft;
			}
			$(".content").find("p,blockquote,h1,h2,h3,h4,h5,strong,b").each(function(){
				if($(this).find("input").length < 1 && jQuery.trim($(this).text()) == ""){
					$(this).remove();
				} 
			});
			$(".content").width(ssw).css("margin-top",$(".wp-caption").eq(curr).height()+colMargin+"px").show();
		}
	}


	/*
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		Keypress Navigation   ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
	*/

	if(keyNav){
		$(document).keydown(function(e){
			if (e.keyCode == 37) {  //left
				moveLeftsl();
				return false;
			}
			if (e.keyCode == 39) {  //right
				moveRightsl();
				return false;
			}
		});
	}

	/*
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		Move Functions  ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
	*/

	//initialize current position
	curr = 0;
	function moveLeftsl(){
		if(curr > 0){
			$(".wp-caption").eq(curr).fadeOut(advanceSpeed);
			$(".wp-caption").eq(curr-1).fadeIn(advanceSpeed);
			curr--;
		}else{
			$(".wp-caption").eq(curr).fadeOut(advanceSpeed);
			$(".wp-caption").eq($(".wp-caption").length-1).fadeIn(advanceSpeed);
			curr = $(".wp-caption").length-1;
		}
		slideshowSetContent();
		if(slideAuto){
			clearInterval(slideshowInt);
			slideshowInt = setInterval(function(){ moveRightsl(); },slideAutoSpeed);
		}
	}
	function moveRightsl(){
		if($(".wp-caption").eq(curr+1).length > 0){
			$(".wp-caption").eq(curr).fadeOut(advanceSpeed);
			$(".wp-caption").eq(curr+1).fadeIn(advanceSpeed);
			curr++;
		}else{
			$(".wp-caption").eq(curr).fadeOut(advanceSpeed);
			$(".wp-caption").eq(0).fadeIn(advanceSpeed);
			curr = 0;
		}
		slideshowSetContent();
		if(slideAuto){
			clearInterval(slideshowInt);
			slideshowInt = setInterval(function(){ moveRightsl(); },slideAutoSpeed);
		}
	}
	$("#moveLeft").click(function(){
		moveLeftsl();
	});
	$("#moveRight").click(function(){
		moveRightsl();
	});
}
//gallery template
if(galleryTemplate && !mobile){

	/*
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		Onload Functions  ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
	*/

	$(document).ready(function(){

		$("body").attr("id","gallery");
		
		//if password protected
		if($("#pass").length > 0){
			pass = true;
		}else{
			pass = false;
		}
	
		if(!pass){
			if($("#gallery_overview").length < 1){
				//move images
				$(".content").find(".wp-caption").appendTo("#thumbs");
				$(".content").find("img,iframe,video,object").addClass("lbc").appendTo("#thumbs");
				$("#thumbs").find(".wp-caption").find("a").attr("href","javascript:void(0)");
				$("#thumbs").find("img").addClass("lbc");
	
				//assign number to images
				$("#thumbs").find(".lbc").each(function(i){
					$(this).attr("id","lbc"+i);
				});
			}else{
				//move images
				$(".content").find("a").appendTo("#thumbs");
				$("#thumbs").find("a").addClass("lbc");
	
				//assign number to images
				$("#thumbs").find(".lbc").each(function(i){
					$(this).attr("id","lbc"+i);
				});
			}
		}
	
		//lightbox
		lbi = 0;
		$(".lbc").click(function(e){
	
			//id
			tidc = $(this).attr("id");
			tidc = tidc.replace("lbc","");
			lbi = parseInt(tidc);
	
			//reset
			$("#lightboximage").html("");
			$("#arr").hide();
		
			//set
			wh = $(window).height();
			nwh = lightboxheight*wh;
			th = $(this).attr("height");
			hr = nwh/th;
			tw = $(this).attr("width");
			$("#lightboximage").height(nwh).width(hr*tw).css("margin","-"+nwh/2+"px 0 0 -"+(hr*tw)/2+"px");
			$(this).clone().height(nwh).width(hr*tw).appendTo("#lightboximage");
			
			//caption
			lbccc = "";
			if($(this).parents(".wp-caption").find(".wp-caption-text").length > 0){
				lbccc = $(this).parents(".wp-caption").find(".wp-caption-text").text();
			}
			$("#lightboxcaption").text(lbccc).css("top",nwh+((wh-nwh)/2)+15+"px");
		
			//fade-in
			$("#lightboxbackground, #lightboximage, #lightboxcaption").fadeIn();
		
		});
	
		//lightbox arrow
		$("#lightboxbackground").mousemove(function(e){
			$("#arr").html("&#10005;").css("left",e.pageX+"px").css("top",e.pageY+20+"px").show();
		});
		$("#lightboximage").mousemove(function(e){
			if(e.pageX > $(window).width()/2){		
				$("#arr").html("&rarr;").css("left",e.pageX+"px").css("top",e.pageY+20+"px").show();
			}else{
				$("#arr").html("&larr;").css("left",e.pageX+"px").css("top",e.pageY+20+"px").show();
			}
		});
	
		//lightbox actions
		$("#lightboxbackground").click(function(){
			$("#arr,#lightboxbackground,#lightboximage,#lightboxcaption").fadeOut();
		});
		$("#lightboximage").click(function(e){
			if(e.pageX > $(window).width()/2){
				if((lbi+1) < ($(".lbc").length-1)){
					lbi++;
					setlbImage(lbi);
				}else{
					lbi = 0;
					setlbImage(lbi);
				}
			}else{
				if(lbi > 0){
					lbi--;
					setlbImage(lbi);
				}else{
					lbi = $(".lbc").length-2;
					setlbImage(lbi);
				}
			}
			if(e.pageX > $(window).width()/2){		
				$("#arr").html("&rarr;").css("left",e.pageX+"px").css("top",e.pageY+20+"px").show();
			}else{
				$("#arr").html("&larr;").css("left",e.pageX+"px").css("top",e.pageY+20+"px").show();
			}
		});
		function setlbImage(lbiid){
			//reset
			$("#lightboximage").html("");
			$("#arr").hide();
		
			//set
			wh = $(window).height();
			nwh = lightboxheight*wh;
			th = $(".lbc").eq(lbiid).attr("height");
			hr = nwh/th;
			tw = $(".lbc").eq(lbiid).attr("width");
			$("#lightboximage").height(nwh).width(hr*tw).css("margin","-"+nwh/2+"px 0 0 -"+(hr*tw)/2+"px");
			$(".lbc").eq(lbiid).clone().height(nwh).width(hr*tw).appendTo("#lightboximage");
			
			//caption
			lbccc = "";
			if($(".lbc").eq(lbiid).parents(".wp-caption").find(".wp-caption-text").length > 0){
				lbccc = $(".lbc").eq(lbiid).parents(".wp-caption").find(".wp-caption-text").text();
			}
			$("#lightboxcaption").text(lbccc).css("top",nwh+((wh-nwh)/2)+15+"px");
		}

		//stylize links
		$("img").each(function(){
			if($(this).parent().is("a")){
				$(this).parent().css("border","0");
			}
		});

		//hide children
		if(hideChildren){
			$("#nav").find(".children, .sub-menu").each(function(){
				if($(this).parents(".current-page-parent").length < 1) $(this).hide();
			});
			$(".children").each(function(){
				$(this).parent().find("a").eq(0).attr("href","javascript:void(0)").click(function(){
					$(this).parent().find(".children").eq(0).slideToggle();
				});
			});
			$(".sub-menu").each(function(){
				$(this).parent().find("a").eq(0).attr("href","javascript:void(0)").click(function(){
					$(this).parent().find(".sub-menu").eq(0).slideToggle();
				});
			});
			$(".current_page_parent, .current_page_item, .current_menu_item").each(function(){
				$(this).find("a").eq(0).addClass("selected");
			});
			if(showPathTo){
				$(".current_page_parent, .current_page_item, .current_menu_item, .current_page_ancestor, .current-cat-parent").each(function(){
					$(this).find(".children, .sub-menu").eq(0).show();
				});
				$(".current_page_parent, .current_page_item, .current_menu_item, .current_page_ancestor").show();
			}
		}
	
		if(keyNav){
			$(document).keydown(function(e){
				if($("#lightboximage").is(":visible")){
					if (e.keyCode == 37) {  //left
						if(lbi > 0){
							lbi--;
							setlbImage(lbi);
						}else{
							lbi = $(".lbc").length-2;
							setlbImage(lbi);
						}
						return false;
					}
					if (e.keyCode == 39) {  //right
						if((lbi+1) < ($(".lbc").length-1)){
							lbi++;
							setlbImage(lbi);
						}else{
							lbi = 0;
							setlbImage(lbi);
						}
						return false;
					}
					if (e.keyCode == 27) { //esc
						$("#arr,#lightboxbackground,#lightboximage,#lightboxcaption").fadeOut();
					}
				}
			});
		}

		galleryResize();

		$("#cover").fadeOut();
		$("#container").animate({
			"opacity":1
		});
	});

	$(window).resize(function(){
		galleryResize();
	
		wh = $(window).height();
		nwh = lightboxheight*wh;
		th = $("#lightboximage").find(".lbc").attr("height");
		hr = nwh/th;
		tw = $("#lightboximage").find(".lbc").attr("width");
		$("#lightboximage").height(nwh).width(hr*tw).css("margin","-"+nwh/2+"px 0 0 -"+(hr*tw)/2+"px");
		$("#lightboximage").find(".lbc").height(nwh).width(hr*tw);
	});


	function galleryResize(){
		if(!pass){
			/*$(".removeClear").remove();
			perRow = Math.floor($("#container").width()/(imgWidth+imgMargin));
			for(i=perRow;i<$("#thumbs img").length;i+=perRow){
				$("<div class='clear removeClear' />").insertBefore($("#thumbs img").eq(i));
			}*/
			$("#container").width($(window).width() - $(".post").eq(0).offset().left);
			$(".wp-caption").css("width",imgWidth+imgMargin+"px");
			$("body").width($(window).width() - (imgMargin));
		}
	}

}
//overview slideshow
if(overviewSlideShow){
	var isCtrl = false;
	$("body").append("<div id='presentation'><div id='presentationImages'></div><div id='presentationPool'></div></div>");
	$("body").find("img").clone().appendTo("#presentationPool");
	$("#presentationPool").find("img").eq(0).clone().appendTo("#presentationImages");
	presi = 0;
	$(document).keydown(function(e){
		if(e.keyCode == 65 && e.shiftKey) {
			$("#presentation").fadeIn();
			$("body,html").css("overflow","hidden");
			return false;
		}
		if($("#presentation").is(":visible")){
			if (e.keyCode == 37) {  //left
				presentationLeft();
				return false;
			}
			if (e.keyCode == 39) {  //right
				presentationRight();
				return false;
			}
			if (e.keyCode == 27) { //esc
				$("#presentation").fadeOut();
				$("body,html").css("overflow","auto");
			}
		}
	});
	function presentationLeft(){
		$("#presentationImages").find("img").remove();
		if(presi <= 0){
			presi = $("#presentationPool").find("img").length-1;
			$("#presentationPool").find("img").eq(presi).clone().appendTo("#presentationImages");
		}else{
			presi--;
			$("#presentationPool").find("img").eq(presi).clone().appendTo("#presentationImages");
		}
	}
	function presentationRight(){
		$("#presentationImages").find("img").remove();
		if(presi < $("#presentationPool").find("img").length-1){
			presi++;
			$("#presentationPool").find("img").eq(presi).clone().appendTo("#presentationImages");
		}else{
			presi = 0;
			$("#presentationPool").find("img").eq(presi).clone().appendTo("#presentationImages");
		}
	}
}
	})(jQuery);
</script>	<script type='text/javascript' src='http://wangyishu.cc/wp-content/themes/COLr/scripts/retina.js?ver=1.3'></script>
<script type='text/javascript' src='http://wangyishu.cc/wp-includes/js/wp-embed.min.js?ver=4.9.15'></script>
	
</body>
</html>

<!DOCTYPE html>
<html lang="zh-CN">

<head>

<title>wangyishu 王轶庶</title>

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="description" content="王轶庶的个人网站">
<link rel="profile" href="http://gmpg.org/xfn/11">
<link rel="pingback" href="http://wangyishu.cc/xmlrpc.php">

<link rel='dns-prefetch' href='//s.w.org' />
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/11\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/11\/svg\/","svgExt":".svg","source":{"concatemoji":"http:\/\/wangyishu.cc\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.9.15"}};
			!function(a,b,c){function d(a,b){var c=String.fromCharCode;l.clearRect(0,0,k.width,k.height),l.fillText(c.apply(this,a),0,0);var d=k.toDataURL();l.clearRect(0,0,k.width,k.height),l.fillText(c.apply(this,b),0,0);var e=k.toDataURL();return d===e}function e(a){var b;if(!l||!l.fillText)return!1;switch(l.textBaseline="top",l.font="600 32px Arial",a){case"flag":return!(b=d([55356,56826,55356,56819],[55356,56826,8203,55356,56819]))&&(b=d([55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447],[55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447]),!b);case"emoji":return b=d([55358,56760,9792,65039],[55358,56760,8203,9792,65039]),!b}return!1}function f(a){var c=b.createElement("script");c.src=a,c.defer=c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var g,h,i,j,k=b.createElement("canvas"),l=k.getContext&&k.getContext("2d");for(j=Array("flag","emoji"),c.supports={everything:!0,everythingExceptFlag:!0},i=0;i<j.length;i++)c.supports[j[i]]=e(j[i]),c.supports.everything=c.supports.everything&&c.supports[j[i]],"flag"!==j[i]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[j[i]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(h=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",h,!1),a.addEventListener("load",h,!1)):(a.attachEvent("onload",h),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),g=c.source||{},g.concatemoji?f(g.concatemoji):g.wpemoji&&g.twemoji&&(f(g.twemoji),f(g.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel='stylesheet' id='style-name-css'  href='http://wangyishu.cc/wp-content/themes/COLr/style.css?ver=4.9.15' type='text/css' media='all' />
<script type='text/javascript' src='http://wangyishu.cc/wp-includes/js/jquery/jquery.js?ver=1.12.4'></script>
<script type='text/javascript' src='http://wangyishu.cc/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.4.1'></script>
<script type='text/javascript' src='http://wangyishu.cc/wp-content/themes/COLr/scripts/columnizer.js?ver=4.9.15'></script>
<script type='text/javascript' src='http://wangyishu.cc/wp-content/themes/COLr/scripts/touchwipe.js?ver=4.9.15'></script>
<script type='text/javascript' src='http://wangyishu.cc/wp-content/themes/COLr/scripts/mousewheel.js?ver=4.9.15'></script>
<link rel='https://api.w.org/' href='http://wangyishu.cc/wp-json/' />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://wangyishu.cc/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://wangyishu.cc/wp-includes/wlwmanifest.xml" /> 
<meta name="generator" content="WordPress 4.9.15" />
<link rel="canonical" href="http://wangyishu.cc/" />
<link rel='shortlink' href='http://wangyishu.cc/' />
<link rel="alternate" type="application/json+oembed" href="http://wangyishu.cc/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fwangyishu.cc%2F" />
<link rel="alternate" type="text/xml+oembed" href="http://wangyishu.cc/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fwangyishu.cc%2F&#038;format=xml" />
<style type='text/css'>body, #cover, body.mobile #menuback, body.mobile #fullMenu { background-color:#FFFFFF; }
#menu { background-color:rgba(255, 255, 255, 1); }
body { color:#000000; }
body { font-family:helvetica, arial, sans-serif; }
body { font-size:9.5pt; }
body { line-height:16pt; }
p { padding-bottom:16pt; }
::selection { background:#EEEEEE; }
::selection { color:#000000; }
#container .post .content a, #container .post .tagcat a, #container .post .commentHold a, #container .post .info a { color:#000000; }
#container .post .content a:hover, #container .post .tagcat a:hover, #container .post .commentHold a:hover, #container .post .info a:hover { color:#000000; }
a, #container .post .info .title a, #menu #title a { border-bottom:1px solid #FFFFFF; }
a:hover, #container .post .info .title a:hover, #menu #title a:hover { border-bottom:1px solid #000000; }
blockquote { color:#AAAAAA; }
blockquote { padding:10px; }
h1 { font-size:19pt; }
h1 { line-height:26pt; }
h2 { font-size:17pt; }
h2 { line-height:24pt; }
h3 { font-size:15pt; }
h3 { line-height:22pt; }
h4 { font-size:13pt; }
h4 { line-height:20pt; }
h5 { font-size:11pt; }
h5 { line-height:18pt; }
#menu { width:200px; }
#menu { padding-right:40px; }
#menu { padding-left:40px; }
#menu { padding-left:40px; }
#menu #title { margin-bottom:40px; }
#menu #title h1 a { color:#000000; }
#menu #title h1 a:hover { color:#000000; }
#menu #title h1 a { border-bottom:1px solid #FFFFFF; }
#menu #title h1 a:hover { border-bottom:1px solid #000000; }
#menu #title h1 { font-size:9.5pt; }
#menu #title h1 { line-height:16pt; }
#menu #nav>ul { margin-bottom:40px; }
#menu #nav ul li a { border-bottom:1px solid #FFFFFF; }
#menu #nav ul li a:hover { border-bottom:1px solid #000000; }
#menu #nav ul li a { font-size:9.5pt; }
#menu #nav ul li a { line-height:16pt; }
#menu #nav ul li a { color:#000000; }
#menu #nav ul li a:hover { color:#000000; }
#menu #description { margin-bottom:40px; }
#menu #nav ul li ul.children, #menu #nav ul li ul.sub-menu { margin-left:8px; }
#menu #nav ul.children li a.selected, #menu #nav ul.sub-menu li a.selected, #menu #nav ul li a.selected, #menu #nav ul li.current-cat a { border-bottom:1px solid #DDDDDD; }
#container .post .info .title a, #container .post .info .title { color:#000000; }
#container .post .info .title a { border-bottom:1px solid #FFFFFF; }
#container .post .info .title a:hover { border-bottom:1px solid #000000; }
#container, #menu { padding-top:40px; }
#container .post .info .section { margin-bottom:40px; }
body#default #container .post .info, body#vertical #container .post .info { font-size:9.5pt; }
body#default #container .post .info, body#vertical #container .post .info { line-height:16pt; }
#container .post .imageElement, #container .post .tagcat { margin-right:40px; }
#container .post .wp-caption .wp-caption-text { font-size:9.5pt; }
#container .post .wp-caption .wp-caption-text { color:#000000; }
body#fullScreen #menu #nav ul li a, body#fullScreen #title a { color:#000000; }
body#fullScreen #menu #nav ul li a, body#fullScreen #title a { border-bottom:1px solid #FFFFFF; }
body#fullScreen #menu #nav ul li a:hover, body#fullScreen #title a:hover { color:#000000; }
body#fullScreen #menu #nav ul li a:hover, body#fullScreen #title a:hover { border-bottom:1px solid #000000; }
body#fullScreen #foldOut, body#fullScreen #foldCover { background:#FFFFFF; }
body#fullScreen #foldOut, body#fullScreen #foldCover { width:200px; }
body#fullScreen #foldOut #hold { padding:40px; }
body#fullScreen #foldCover { height:40px; }
body#fullScreen #info { color:#FFFFFF; }
body#fullScreen #info { border:2px solid #FFFFFF; }
body#fullScreen #infoHold { padding:40px; }
body#gallery #thumbs img { width:200px; }
body#gallery #thumbs img { margin:0 40px 40px 0; }
#container #pagination a { color:#000000; }
#container #pagination a:hover { color:#000000; }
#container #pagination a { border-bottom:1px solid #FFFFFF; }
#container #pagination a:hover { border-bottom:1px solid #000000; }
body.mobile #nav-toggle span, body.mobile #nav-toggle span:before, body.mobile #nav-toggle span:after { background-color:#000000; }
body.mobile #fullMenu #nav ul li a { color:#000000; }
body.mobile #menuback { border-bottom:1px solid #AAAAAA; }
body.mobile *, body.mobile #container .post .wp-caption .wp-caption-text { font-size:14pt; }
body.mobile *, body.mobile #container .post .wp-caption .wp-caption-text { line-height:21pt; }
body#fullScreen #menu { background:#FFFFFF; }
body#fullScreen #arrow { color:#000000; }
body.slideshowTemplate #container .post .content { display:block; }
body.slideshowTemplate #container .post .info { display:block; }
body#gallery #thumbs .lbc { opacity:1; }
body#gallery #thumbs .lbc:hover { opacity:1; }
body#gallery #thumbs .lbc { transition: opacity 1s ease-in-out;-moz-transition: opacity 1s ease-in-out;-webkit-transition: opacity 1s ease-in-out; }
body#gallery #lightboxbackground { background:#FFFFFF; }
body#gallery #lightboxbackground { opacity:.9; }
body#gallery a#arr { color:#000000; }
#container { padding-left:280px; }
</style>
</head>
<body class="home page-template-default page page-id-422">

				<script type="text/javascript">
			defaultTheme = true;
			fullScreenT = false;
			textTemplate = false;
			galleryTemplate = false;
			slideshowTemplate = false;
		</script>
			
	<div id="container">

					
			<div class="post" class="post-422 page type-page status-publish hentry">
				<div class="info">
					<div class="title section">©All images copyrights Wang Yishu</div>
					<div class="extended section">23 四月 2018</div>
					<div class="clear"></div>
				</div>
				<div class="content">
					<p><div class="wp-caption"><img class="alignnone size-full wp-image-455" src="http://wangyishu.cc/wp-content/uploads/2018/05/J1A8512-6_调整大小.jpg" alt="" width="1200" height="769" /></div></p> <p>New Solo Exhibition at Toronto Osgoode Subway Station,  Courtesy of Scotiabank Contact Photography Festival</p> 				</div>
			</div>

			
				
		<div class="tracer"></div>
		<div class="clear"></div>

	</div>

	
		<div id="menu">
			<div id="title">
									<h1><a href="http://wangyishu.cc">wangyishu 王轶庶</a></h1>
							</div>
			<div id="description">
				王轶庶的个人网站			</div>
			<div id="mobileNav" style="display:none">
									<ul><div class="menu-menu-container"><ul id="menu-menu" class="menu"><li id="menu-item-165" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-165"><a href="#">PROJECTS</a>
<ul class="sub-menu">
	<li id="menu-item-166" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-166"><a href="http://wangyishu.cc/borderless-2016-2017/">Borderless 2016-2017</a></li>
	<li id="menu-item-253" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-253"><a href="http://wangyishu.cc/open-ending-2009-2015/">Open-Ending 2005-2015</a></li>
	<li id="menu-item-320" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-320"><a href="http://wangyishu.cc/return-2003-2005/">Return  2003-2005</a></li>
</ul>
</li>
<li id="menu-item-403" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-403"><a href="#"></p></a>
<ul class="sub-menu">
	<li id="menu-item-421" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-421"><a href="http://wangyishu.cc/book/">book</a></li>
	<li id="menu-item-394" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-394"><a href="http://wangyishu.cc/%e5%b1%95%e8%a7%88/">Installation views</a></li>
	<li id="menu-item-406" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-406"><a href="http://wangyishu.cc/bio/">Bio</a></li>
	<li id="menu-item-417" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-417"><a href="http://wangyishu.cc/contact/">Contact</a></li>
</ul>
</li>
<li id="menu-item-407" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-407"><a href="#"></p></a></li>
<li id="menu-item-397" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-397"><a href="http://wangyishu.cc/blog/">Art Review</a></li>
</ul></div></ul><ul><div class="textwidget custom-html-widget"><a href="https://www.instagram.com/yishuwang/" target="_blank" rel="noopener"><img class="alignnone wp-image-445" src="http://wangyishu.cc/wp-content/uploads/2018/04/timg-1.jpg" alt="" width="30" height="30" /></a></div></ul>							</div>
			<div id="nav">
				<ul><div class="menu-menu-container"><ul id="menu-menu-1" class="menu"><li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-165"><a href="#">PROJECTS</a>
<ul class="sub-menu">
	<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-166"><a href="http://wangyishu.cc/borderless-2016-2017/">Borderless 2016-2017</a></li>
	<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-253"><a href="http://wangyishu.cc/open-ending-2009-2015/">Open-Ending 2005-2015</a></li>
	<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-320"><a href="http://wangyishu.cc/return-2003-2005/">Return  2003-2005</a></li>
</ul>
</li>
<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-403"><a href="#"></p></a>
<ul class="sub-menu">
	<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-421"><a href="http://wangyishu.cc/book/">book</a></li>
	<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-394"><a href="http://wangyishu.cc/%e5%b1%95%e8%a7%88/">Installation views</a></li>
	<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-406"><a href="http://wangyishu.cc/bio/">Bio</a></li>
	<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-417"><a href="http://wangyishu.cc/contact/">Contact</a></li>
</ul>
</li>
<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-407"><a href="#"></p></a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-397"><a href="http://wangyishu.cc/blog/">Art Review</a></li>
</ul></div></ul><ul><div class="textwidget custom-html-widget"><a href="https://www.instagram.com/yishuwang/" target="_blank" rel="noopener"><img class="alignnone wp-image-445" src="http://wangyishu.cc/wp-content/uploads/2018/04/timg-1.jpg" alt="" width="30" height="30" /></a></div></ul>			</div>
		</div>
		
		<div id="cover"></div>	
<script type="text/javascript">
		(function($) {
heightSubtract = 190;
colWidth = 200;
colMargin = 40;
menuWidth = 200;
menuMargin = 40;
menuMarginLeft = 40;
menuState = 'absolute';
navOffset = menuWidth + menuMargin + menuMarginLeft - (colMargin*2);
dynamicResize = true;
hideChildren = false;
showPathTo = true;						//default: true
resizeITo = 'none';
mouseWheel = false;
keyNav = true;
trackPos = true;						//default: true
autoAdvance = false;
returnScroll = false;
prevText = '→';
nextText = '←';
titlePos = false;

//mobile template
mobileOn = true;
mobileresizeIToWidth = "none";			//default: "none", other options: "max", numerical value
mobileresizeIToHeight = "none";			//default: "none", other options: "max", numerical value
touchWipe = false;						//default: false
tapAdvance = false;						//default: false

//fullscreen template
clickThrough = false;
clickAdvance = 'forward';
fullAuto = false;
fullAutoSpeed = 6000;
showArrows = true;
showmb = true;
fullscreenInfoShow = false;
fullscreenInfoWidth = 200;
fullscreenInfoPadding = 40;

//text template
pageWidth = 800;
minPageWidth = 400;
adaptiveScale = true;

//slideshow template
showText = true;
slideAuto = false;
slideAutoSpeed = 6000;
advanceSpeed = 500;
slideshowClickThrough = true;

//gallery template
imgWidth = 200;
imgMargin = 40;
lightboxheight = 0.8;
overviewSlideShow = false;

function UtilityHasTouch(){    
	var agent   = navigator.userAgent;
	if(agent.match(/(iPhone|iPod|Blackberry|Android)/)){
		return true;
	}else{
		return false;
	}
}

if(mobileOn && UtilityHasTouch()){
	mobile = true;
}else{
	mobile = false;
}

//mobile template
if(mobile){

	//reset options for mobile
	heightSubtract = 120;
	colWidth = 300;
	colMargin = 30;
	menuWidth = 0;
	menuMargin = 0;
	menuMarginLeft = 0;
	menuState = 'absolute';
	navOffset = menuWidth + menuMargin + menuMarginLeft - (colMargin*2);
	lazyLoad = false;
	dynamicResize = true;
	resizeITo = 'none';

	//text template
	pageWidth = 1000;

	minPageWidth = 100;

	/*
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		On load functions ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
	*/

	$(document).ready(function(){

		$(".wp-caption").css("width","auto");

		$("#nav").hide();
		$("body").addClass("mobile");

		//add menu link
		$("body").append("<div id='menuback'></div>");
		$("body").append("<div id='fullMenu' style='display:none;width:200px;'><div id='inf' style='width:200px;'></div></div>");
		$("body").append('<a id="nav-toggle" href="#"><span></span></a>');
		$("body").append("<div id='menuTitle'><div class='inner'>"+$("#title").html()+"</div></div>");
		if($("#mobileNav").length > 0){
			$("#mobileNav").show().appendTo("#inf");
			$("#nav").hide();
		}else{
			$("#nav").show().appendTo("#inf");
		}

		//setup menu functions				
		$("#nav-toggle").click(function(){
			this.classList.toggle("active");
			l = $(window).scrollLeft();
			if($("#fullMenu").is(":hidden")){
				$("#fullMenu").stop().animate({ width: 'toggle'});
			}else{
				$("#fullMenu").stop().animate({ width: 'toggle'});
			}
		});
		
		//remove br
		$(".content").each(function(){
			//$('img, .wp-caption').nextUntil(':not(br)').remove();
		});

	});

}
//default template
if(defaultTheme && !mobile){
	/*
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		On load functions ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
	*/

	$(document).ready(function(){
	
		var agent = navigator.userAgent;
		if(agent.match(/(iPad)/)){
			$("meta[name='viewport']").attr("content", "minimum-scale=1.0, height=device-height");
		}

		h = $(window).height() - heightSubtract;
		
		if(h < 250){
			h = 250;
		}
	
		$("body").attr("id","default");
	
		$(".wp-caption").css("width","auto");

		$(".post").each(function(){
			//set active
			$(this).find(".content").addClass("	active");
			//wrap unwrapped text nodes
			var textnodes = getTextNodesIn($(this).find(".content")[0]);
			for(var i=0; i < textnodes.length; i++){
				if($(textnodes[i]).parent().is(".content")){
					$(textnodes[i]).wrap("<p>");
				}
			}
			//separate images & videos
			$(this).find("img,iframe,video,object").not(".inColumn").each(function(i){
				if($(this).parents(".wp-caption").length > 0){
					$("<div class='content next'>").insertAfter(".active").append($(this).parents(".wp-caption").nextAll());
					$(".active").removeClass("active");
					$("<div class='imageElement' width='"+$(this).attr("width")+"' height='"+$(this).attr("height")+"'>").insertBefore(".next").append($(this).parents(".wp-caption"));
					$(".next").removeClass("next").addClass("active");
				}else if($(this).parents("a").length > 0){ 
					$("<div class='content next'>").insertAfter(".active").append($(this).parents("a").nextAll());
					$(".active").removeClass("active");
					$("<div class='imageElement' width='"+$(this).attr("width")+"' height='"+$(this).attr("height")+"'>").insertBefore(".next").append($(this).parents("a"));
					$(".next").removeClass("next").addClass("active");
				}else{
					$("<div class='content next'>").insertAfter(".active").append($(this).nextAll());
					$(".active").removeClass("active");
					$("<div class='imageElement' width='"+$(this).attr("width")+"' height='"+$(this).attr("height")+"'>").insertBefore(".next").append($(this));
					$(".next").removeClass("next").addClass("active");	
				}
			});
			//remove empty .content divs
			$(this).find(".content").each(function(){
				if(jQuery.trim($(this).text()) == "") $(this).remove();
			});
			//remove empty text elements
			$(this).find("p,blockquote,h1,h2,h3,h4,h5").each(function(){
				if(jQuery.trim($(this).text()) == "" && $(this).parents("#respond").length <= 0 && $(this).find("input").length <= 0) $(this).remove();
			});
			//remove .active
			$(".active").removeClass("active");
			//assign .ie
			$(".imageElement, .column, #container").addClass("ie");
		});

		//stylize links
		$("img").each(function(){
			if($(this).parent().is("a")){
				$(this).parent().css("border","0");
			}
		});

		//insert line break after paragraph tag
		$(".content").find("p").after("<br />");

		//resize images, columnize, determine width
		calibrate("initial");

		//hide children
		if(hideChildren){
			$("#nav").find(".children, .sub-menu").each(function(){
				//if($(this).parents(".current-page-parent").length < 1) $(this).hide();
				if(!$(this).parent().parent().is(".current-page-parent")) $(this).hide();
			});
			$(".children").each(function(){
				$(this).parent().find("a").eq(0).attr("href","javascript:void(0)").click(function(){
					$(this).parent().find(".children").eq(0).slideToggle();
				});
			});
			$(".sub-menu").each(function(){
				$(this).parent().find("a").eq(0).attr("href","javascript:void(0)").click(function(){
					$(this).parent().find(".sub-menu").eq(0).slideToggle();
				});
			});
			$(".current_page_parent, .current_page_item, .current_menu_item").each(function(){
				$(this).find("a").eq(0).addClass("selected");
			});
			if(showPathTo){
				$(".current_page_parent, .current_page_item, .current_menu_item, .current_page_ancestor, .current-cat-parent").each(function(){
					$(this).find(".children, .sub-menu").eq(0).show();
				});
				$(".current_page_parent, .current_page_item, .current_menu_item, .current_page_ancestor").show();
			}
		}

		$("#cover").fadeOut();
		$("#container").animate({
			"opacity":1
		});
	});

	hasLoaded = 0;
	$(window).load(function(){
		//set width
		$("#container").width($(".tracer").offset().left-navOffset-colMargin);
		$("body").width($(".tracer").offset().left);
		hasLoaded = 1;
	});

	/*
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		On resize functions ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
	*/

	$(window).resize(function(){
		if(dynamicResize){
			h = $(window).height() - heightSubtract;
			if(h < 250){
				h = 250;
			}
			$("body, #container").width(9999999);
			calibrate();
		}
	});

	/*
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		Calibrate Function  ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
	*/

	function calibrate(type){
		if(typeof(type)==='undefined') a = "secondary";
		//set videos
		$(".mejs-container").each(function(){
			var attr = $(this).attr('width');
			if (typeof attr == typeof undefined || attr == false) {
				$(this).attr('width',$(this).find("video").attr("width"));
			}
			var attr = $(this).attr('height');
			if (typeof attr == typeof undefined || attr == false) {
				$(this).attr('height',$(this).find("video").attr("height"));
			}
		});
		//resize images and videos
		$(".post").find("img,video,object,embed,iframe,.mejs-container").not(".inColumn").each(function(){
	
			if(resizeITo == "none"){
				newHeight = h;
			}else if(resizeITo == "max"){
				if(h > $(this).attr("height")){
					newHeight = $(this).attr("height");
				}else{
					newHeight = h;
				}
			}else{
				newHeight = resizeITo;
			}
		
			height = $(this).attr("height");
			width = $(this).attr("width");
			heightRatio = newHeight/height;
			$(this).height(newHeight).width(width*heightRatio);
			$(this).parents(".wp-caption").width(width*heightRatio);
		});
		if(titlePos){
			$(".info").css("top",h+100+"px");
		}
		if(type == "initial"){ //if first run-through
			//columnize
			$(".content,#commentsList").each(function(){
				var $tc = $(this);
				$tc.columnize({
					buildOnce:true,
					doneFunc: function(){
						rebuildColumns($tc,type);
					},
					height:h,
					width:colWidth
				});
			});
		}else{ //if resize
			//reset
			$(".content,.column,#commentsList").css("float","none");
			$(".column").contents().unwrap();
			$(".column").remove();
			if($("#container").find("img,video,object,embed,iframe").length > 0) $(".content").css('width', 'auto');
			$("body,#container").width(999999);
			$(".ie").removeClass("ie");
			//combine split
			$(".split").each(function(){
				if($(this).next().is(".split") && $(this).next().is($(this).get(0).tagName)){
					$(this).contents().prependTo($(this).next());
					$(this).remove();
				}
			});
			//columnize
			$(".content,#commentsList").each(function(){
				var $tc = $(this);
				$tc.columnize({
					buildOnce:true,
					doneFunc: function(){
						rebuildColumns($tc,type);
					},
					height:h,
					width:colWidth
				});
			});
		}
		if($(".content").length <= 0){
			$(".imageElement, .column, #container").addClass("ie");
			if((dynamicResize && type != "initial") || hasLoaded == 1){
				//set width
				$("#container").width($(".tracer").offset().left-navOffset-colMargin);
				$("body").width($(".tracer").offset().left);
			}
		}
		$(".column").width(colWidth).css("margin-right",colMargin+"px");
	}
	function rebuildColumns(t,type){
		$("body,#container").width(999999);
		//delete empty columns
		t.find(".column").each(function(){
			if(jQuery.trim($(this).text()) == "") $(this).remove();
			if($(this).children(":first").is("br")) $(this).children(":first").remove();
		});
		//reset widths
		t.find(".column").width(colWidth).css("margin-right",colMargin+"px");
		t.each(function(){
			numCol = $(this).children(".column").length;
			$(this).width((numCol*colWidth) + (numCol*colMargin));
		});
		//reset floats
		t.find(".column").css("float","left");
		t.css("float","left");
		//assign .ie class
		$(".imageElement, .column, #container").addClass("ie");
	
		$(".post").each(function(){
			if($(this).find(".content,.imageElement").length < 1){
				$(this).append("<div style='height:1px;width:"+colWidth+"px;'></div>");
			}
		});
	
		if((dynamicResize && type != "initial") || hasLoaded == 1){
			//set width
			$("#container").width($(".tracer").offset().left-navOffset-colMargin);
			$("body").width($(".tracer").offset().left);
		}
	}

	/*
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		Wrap un-wrapped Text Nodes  ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		Function comes from Arash Milani  ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		stackoverflow.com/questions/13836633/jquery-wrap-all-unwrapped-text-in-p-tags
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
	*/

	function getTextNodesIn(node, includeWhitespaceNodes) { 
		var textNodes = [], whitespace = /^\s*$/;
		function getTextNodes(node) {
			if (node.nodeType == 3) {
				if (includeWhitespaceNodes || !whitespace.test(node.nodeValue)) {
					textNodes.push(node);
				}
			}else{
				for(var i = 0, len = node.childNodes.length; i < len; ++i) {
					getTextNodes(node.childNodes[i]);
				}
			}
		}
		getTextNodes(node);
		return textNodes;
	}

	/*
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		Map mousewheel to horizontal scroll   ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		Function comes from Andy E  ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		http://stackoverflow.com/questions/2346958/how-to-do-a-horizontal-scroll-on-mouse-wheel-scroll
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
	*/

	if(mouseWheel){
		/*var mouseWheelEvt = function(e){
			var event = e || window.event;
			if (document.body.doScroll) document.body.doScroll(event.wheelDelta>0?"left":"right");
			else if ((event.wheelDelta || event.detail) > 0) document.body.scrollLeft -= 10;
			else document.body.scrollLeft += 10;
			return false;
		}
		if("onmousewheel" in document.body) document.body.onmousewheel = mouseWheelEvt;
		else document.body.addEventListener("DOMMouseScroll", mouseWheelEvt);*/
		
		$("html,body").mousewheel(function(event, delta) {
			event.preventDefault();
			this.scrollLeft -= (delta*5);
		});
		
		/*(function() {
			function scrollHorizontally(e) {
				e = window.event || e;
				var delta = Math.max(-1, Math.min(1, (e.wheelDelta || -e.detail)));
				document.documentElement.scrollLeft -= (delta*20);
				document.body.scrollLeft -= (delta*20);
				e.preventDefault();
			}
			if (window.addEventListener) {
				// IE9, Chrome, Safari, Opera
				window.addEventListener("mousewheel", scrollHorizontally, false);
				// Firefox
				window.addEventListener("DOMMouseScroll", scrollHorizontally, false);
			} else {
				// IE 6/7/8
				window.attachEvent("onmousewheel", scrollHorizontally);
			}
		})();*/
	}

	/*
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		Keypress Navigation   ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
	*/

	if(keyNav){
		$(document).keydown(function(e){
			if (e.keyCode == 37) {  //left
				moveLeft();
				return false;
			}
			if (e.keyCode == 39) {  //right
				moveRight();
				return false;
			}
		});
	}

	/*
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		Move Functions  ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
	*/

	//initialize current position
	if(menuState == "absolute"){
		curr = 0;
	}else{
		curr = 1;
	}

	//track position on page scroll
	if(trackPos){
		$(window).scroll(function(){
			navOffset2 = menuWidth + menuMargin + menuMarginLeft;
			if(menuState == "absolute") navOffset2 = 0;
			leftPos = $(window).scrollLeft()+navOffset2;
			if(menuState == "absolute") leftPos +=colMargin;
			closest = 0;
			dist = 999999;
			$(".ie").each(function(i){
				if(Math.abs($(".ie").eq(i).offset().left - leftPos) < dist){
					dist = Math.abs($(".ie").eq(i).offset().left - colMargin - leftPos);
					closest = i;
				}
			});
			curr = closest;
		});
	}

	moving = 0;
	function moveLeft(){
		if((curr > 0 && menuState == "absolute") || (curr > 1 && menuState == "fixed")){
			curr--;
			if(menuState == "absolute"){
				if(moving == 0){
					moving = 1;
					$("body,html").animate({
						"scrollLeft": $(".ie").eq(curr).offset().left - colMargin
					},function(){
						moving = 0;
					});
				}
			}else{
				if(moving == 0){
					moving = 1;
					$("body,html").animate({
						"scrollLeft": $(".ie").eq(curr).offset().left - menuMarginLeft - menuWidth - menuMargin
					},function(){
						moving = 0;
					});
				}
			}
		}else{
			if(autoAdvance){
				$("#pagination").find("a").each(function(){
					if($(this).text() == nextText) document.location.href = $(this).attr("href");
				});
			}
			if(returnScroll){
				curr = $(".ie").length - 1;
				if(menuState == "absolute"){
					if(moving == 0){
						moving = 1;
						$("body,html").animate({
							"scrollLeft": $(".ie").eq(curr).offset().left - colMargin
						},function(){
							moving = 0;
						});
					}
				}else{
					if(moving == 0){
						moving = 1;
						$("body,html").animate({
							"scrollLeft": $(".ie").eq(curr).offset().left - menuMarginLeft - menuWidth - menuMargin
						},function(){
							moving = 0;
						});
					}
				}
			}
		}
	}
	function moveRight(){
		/*if(curr < $(".ie").length){*/
		/*if(($(".ie").eq(curr).offset().left + $(window).width()) < ($("#container").width() + $(".post").eq(0).offset().left)){ //changed to move at end, not at last element*/
		if(($(window).scrollLeft() + $(window).width() + (colMargin*2)) < ($("#container").width() + $(".post").eq(0).offset().left)){
			if($(".ie").eq(curr+1).length > 0){
				curr++;
				if(menuState == "absolute"){
					if(moving == 0){
						moving = 1;
						$("body,html").animate({
							"scrollLeft": $(".ie").eq(curr).offset().left - colMargin
						},function(){
							moving = 0;
						});
					}
				}else{
					if(moving == 0){
						moving = 1;
						$("body,html").animate({
							"scrollLeft": $(".ie").eq(curr).offset().left - menuMarginLeft - menuWidth - menuMargin
						},function(){
							moving = 0;
						});
					}
				}
			}
		}else{
			if(autoAdvance){
				$("#pagination").find("a").each(function(){
					if($(this).text() == prevText) document.location.href = $(this).attr("href");
				});
			}
			if(returnScroll){
				if(menuState == "absolute"){ curr = 0; }else{ curr = 1; }
				if(menuState == "absolute"){
					if(moving == 0){
						moving = 1;
						$("body,html").animate({
							"scrollLeft": $(".ie").eq(curr).offset().left - colMargin
						},function(){
							moving = 0;
						});
					}
				}else{
					if(moving == 0){
						moving = 1;
						$("body,html").animate({
							"scrollLeft": $(".ie").eq(curr).offset().left - menuMarginLeft - menuWidth - menuMargin
						},function(){
							moving = 0;
						});
					}
				}
			}
		}
	}
}
//fullscreen template
if(fullScreenT && !mobile){

	/*
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		Onload Functions  ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
	*/

	$(document).ready(function(){

		$(".wp-caption").css("width","auto");

		h = $(window).height();
		w = $(window).width();

		$("<div id='images' />").insertBefore("#menu");
		$("body").attr("id","fullScreen");

		$(".post").each(function(){
			//separate images & videos
			$(this).find("img,iframe,video,object").each(function(i){
				if(clickThrough){
					permalink = $("#title").find("a").attr("href");
					$(this).appendTo("#images").wrap("<a class='se' href='"+permalink+"' />").hide();
				}else{
					$(this).appendTo("#images").addClass("se").hide();
				}
			});
		});
		
		if(fullscreenInfoShow){
			totalWidth = fullscreenInfoWidth+(fullscreenInfoPadding*2);
			
			$("body").append("<div id='foldOut'><div id='hold'></div></div>");
			$("body").append("<div id='foldCover'>&nbsp;</div>");
			$("body").append("<div id='infoHold'><div id='info'><div>i</div></div></div>");
			$(".content").find("p").each(function(){
				if(jQuery.trim($(this).text()) == "" && $(this).find("input").length < 1) $(this).remove();
			});
			$("#hold").html($(".content").html());
			$("#foldOut,#foldCover").width(0).show();
			
			$("#foldOut,#info,#infoHold").mousemove(function(){
				$("#arrow").hide();
			});
			
			$("#info").click(function(){
				if($(this).hasClass("close")){
					$(this).removeClass("close").html("<div>i</div>");
					$('#foldOut,#foldCover').animate({ width: 0 });
					$("#infoHold").animate({ "right": 0 });
				}else{
					$(this).addClass("close").html("<div>&times;</div>");
					$('#foldOut,#foldCover').animate({ width: totalWidth });
					$("#infoHold").animate({ "right": totalWidth });
				}
			});
		}

		$(".se").eq(0).show();
		$(".se").eq(0).find("img").show();

		/*
			~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
			~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
			~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
			Keypress Navigation   ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~
			~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
			~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
			~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		*/

		if(keyNav){
			$(document).keydown(function(e){
				if (e.keyCode == 37) {  //left
					advLeft();
					return false;
				}
				if (e.keyCode == 39) {  //right
					advRight();
					return false;
				}
			});
		}

		/*
			~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
			~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
			~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
			Click Advance ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~
			~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
			~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
			~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		*/

		if(clickAdvance != "none"){
			currPos = 0;
			$(".se").addClass("cursor");

			if(showArrows){
				$(".se").addClass("arrow");
				$("body").append("<div id='arrow' />");
				if(clickAdvance == "half"){
					$(".se").mousemove(function(e){
						if(showmb){
							if(e.pageX > (($(window).width() - $("#menu").outerWidth())/2)+$("#menu").outerWidth()){		
								$("#arrow").html("&rarr;").css("left",e.pageX+"px").css("top",e.pageY+20+"px").show();
							}else{
								$("#arrow").html("&larr;").css("left",e.pageX+"px").css("top",e.pageY+20+"px").show();
							}
						}else{
							if(e.pageX > $(window).width()/2){		
								$("#arrow").html("&rarr;").css("left",e.pageX+"px").css("top",e.pageY+20+"px").show();
							}else{
								$("#arrow").html("&larr;").css("left",e.pageX+"px").css("top",e.pageY+20+"px").show();
							}
						}
					});
				}
				if(clickAdvance == "forward"){
					$(".se").mousemove(function(e){
						$("#arrow").html("&rarr;").css("left",e.pageX+"px").css("top",e.pageY+20+"px").show();
					});
				}
				$("#menu").mousemove(function(){
					$("#arrow").hide();
				});
			}

			if(clickAdvance == "half"){
				$(".se").click(function(e){
					if(e.pageX < $(window).width()/2){
						advLeft();
					}else{
						advRight();
					}
				});
			}
			if(clickAdvance == "forward"){
				$(".se").click(function(){
					advRight();
				});
			}
		}
		
		if(fullAuto){
			fullscreenInt = setInterval(function(){ advRight(); },fullAutoSpeed);
		}

		function advRight(){
			if(currPos < $(".se").length-1){
				$(".se").eq(currPos).hide();
				currPos++;
				$(".se").eq(currPos).show();
			}else{
				$(".se").eq(currPos).hide();
				currPos=0;
				$(".se").eq(currPos).show();
			}
			if(fullAuto){
				clearInterval(fullscreenInt);
				fullscreenInt = setInterval(function(){ advRight(); },fullAutoSpeed);
			}
		}
		function advLeft(){
			if(currPos > 0){
				$(".se").eq(currPos).hide();
				currPos--;
				$(".se").eq(currPos).show();
			}else{
				$(".se").eq(currPos).hide();
				currPos = $(".se").length-1;
				$(".se").eq(currPos).show();
			}
			if(fullAuto){
				clearInterval(fullscreenInt);
				fullscreenInt = setInterval(function(){ advRight(); },fullAutoSpeed);
			}
		}

		$("#container").hide();

		//stylize links
		$("img").each(function(){
			if($(this).parent().is("a")){
				$(this).parent().css("border","0");
			}
		});

		//hide children
		if(hideChildren){
			$("#nav").find(".children, .sub-menu").each(function(){
				if($(this).parents(".current-page-parent").length < 1) $(this).hide();
			});
			$(".children").each(function(){
				$(this).parent().find("a").eq(0).attr("href","javascript:void(0)").click(function(){
					$(this).parent().find(".children").eq(0).slideToggle();
				});
			});
			$(".sub-menu").each(function(){
				$(this).parent().find("a").eq(0).attr("href","javascript:void(0)").click(function(){
					$(this).parent().find(".sub-menu").eq(0).slideToggle();
				});
			});
			$(".current_page_parent, .current_page_item, .current_menu_item").each(function(){
				$(this).find("a").eq(0).addClass("selected");
			});
			if(showPathTo){
				$(".current_page_parent, .current_page_item, .current_menu_item, .current_page_ancestor, .current-cat-parent").each(function(){
					$(this).find(".children, .sub-menu").eq(0).show();
				});
				$(".current_page_parent, .current_page_item, .current_menu_item, .current_page_ancestor").show();
			}
		}

		resizeImagesAndBody();

		$("#cover").fadeOut();
		$("#container").animate({
			"opacity":1
		});
	});

	/*
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		Window Resize ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
	*/

	$(window).resize(function(){
		resizeImagesAndBody();
	});

	function resizeImagesAndBody(){
		$("body,#container").width($(window).width()).height($(window).height());
		if(showmb) $("#images").css("margin-left",$("#menu").outerWidth()+"px");
		$("#images").find("img,iframe,video,object").each(function(i){
			oh = $(this).attr("height");
			ow = $(this).attr("width");
			wh = $(window).height();
			ww = $(window).width();
			if(showmb) ww = ww - $("#menu").outerWidth();
			wr = ww/ow;
			hr = wh/oh;
			if(wr > hr){
				nw = ow * wr;
				nh = oh * wr;
				ml = 0;
				mt = -1*((nh - $(window).height())/2);
				$(this).width(nw).height(nh).css("margin",mt+"px 0 0 "+ml+"px");
			}else{
				nw = ow * hr;
				nh = oh * hr;
				mt=0;
				ml = -1*((nw - $(window).width())/2);
				if(showmb) ml = -1*((nw - ($(window).width() - $("#menu").outerWidth()))/2);
				$(this).width(nw).height(nh).css("margin",mt+"px 0 0 "+ml+"px");
			}
		});
	}

}
//text template
if(textTemplate || mobile){

	/*
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		Onload Functions  ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
	*/

	$(document).ready(function(){

		$(".wp-caption").css("width","auto");

		$("body").attr("id","vertical");
	
		if($(".woocommerce").length < 1){
			$(".post").each(function(){
				//wrap unwrapped text nodes
				var textnodes = getTextNodesIn($(this).find(".content")[0]);
				for(var i=0; i < textnodes.length; i++){
					if($(textnodes[i]).parent().is(".content")){
						$(textnodes[i]).wrap("<p>");
					}
				}
			});
		}

		//stylize links
		$("img").each(function(){
			if($(this).parent().is("a")){
				$(this).parent().css("border","0");
			}
		});

		//hide children
		if(hideChildren){
			$("#nav, #mobileNav").find(".children, .sub-menu").each(function(){
				if($(this).parents(".current-page-parent").length < 1) $(this).hide();
			});
			$(".children").each(function(){
				$(this).parent().find("a").eq(0).attr("href","javascript:void(0)").click(function(){
					$(this).parent().find(".children").eq(0).slideToggle();
				});
			});
			$(".sub-menu").each(function(){
				$(this).parent().find("a").eq(0).attr("href","javascript:void(0)").click(function(){
					$(this).parent().find(".sub-menu").eq(0).slideToggle();
				});
			});
			$(".current_page_parent, .current_page_item, .current_menu_item").each(function(){
				$(this).find("a").eq(0).addClass("selected");
			});
			if(showPathTo){
				$(".current_page_parent, .current_page_item, .current_menu_item, .current_page_ancestor, .current-cat-parent").each(function(){
					$(this).find(".children, .sub-menu").eq(0).show();
				});
				$(".current_page_parent, .current_page_item, .current_menu_item, .current_page_ancestor").show();
			}
		}

		resizeImagesAndBodyBlog();
	
		$("p").each(function(){
			if(jQuery.trim($(this).text()) == "" && $(this).find("input").length < 1) $(this).remove();
		});

		$("#cover").fadeOut();
		$("#container").animate({
			"opacity":1
		});
	});

	$(window).resize(function(){
		resizeImagesAndBodyBlog();
	});

	function getTextNodesIn(node, includeWhitespaceNodes) { 
		var textNodes = [], whitespace = /^\s*$/;
		function getTextNodes(node) {
			if (node.nodeType == 3) {
				if (includeWhitespaceNodes || !whitespace.test(node.nodeValue)) {
					textNodes.push(node);
				}
			}else{
				for(var i = 0, len = node.childNodes.length; i < len; ++i) {
					getTextNodes(node.childNodes[i]);
				}
			}
		}
		getTextNodes(node);
		return textNodes;
	}

	function resizeImagesAndBodyBlog(){
		if(mobile) pageWidth = ($(window).width() - $(".post").offset().left - colMargin);
		if(!mobile){
			$(".post").find("img,iframe,video,object").each(function(){

				$(this).addClass("ie");

				iw = $(this).attr("width");
				ih = $(this).attr("height");

				if(adaptiveScale && ($(window).width() - $(".post").offset().left - colMargin) <= pageWidth){
					if(($(window).width() - $(".post").offset().left - colMargin) > minPageWidth){
						nw = $(window).width() - $(".post").offset().left - colMargin;
					}else{
						nw = minPageWidth;
					}
				}else{
					nw = pageWidth;
				}

				r = nw/iw;

				if(iw >= nw){ $(this).width(nw).height(r*ih); }

			});
		}else{
			$(".post").find("iframe,video,object").each(function(){

				$(this).addClass("ie");

				iw = $(this).attr("width");
				ih = $(this).attr("height");

				if(adaptiveScale && ($(window).width() - $(".post").offset().left - colMargin) <= pageWidth){
					if(($(window).width() - $(".post").offset().left - colMargin) > minPageWidth){
						nw = $(window).width() - $(".post").offset().left - colMargin;
					}else{
						nw = minPageWidth;
					}
				}else{
					nw = pageWidth;
				}

				r = nw/iw;

				if(iw >= nw){ $(this).width(nw).height(r*ih); }

			});
			$(".post img").addClass("ie");
		}

		if(adaptiveScale && ($(window).width() - $(".post").offset().left - colMargin) <= pageWidth){
			if(($(window).width() - $(".post").offset().left - colMargin) > minPageWidth){
				pw = $(window).width() - $(".post").offset().left - colMargin;
			}else{
				pw = minPageWidth;
			}
		}else{
			pw = pageWidth;
		}

		$("#container,.post").width(pw);
		$("body").width(pw+$(".post").offset().left);
	}

}
//slideshow template
if(slideshowTemplate && !mobile){
	/*
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		On load functions ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
	*/

	$(document).ready(function(){

		h = $(window).height() - heightSubtract;
	
		if(mobileOn && UtilityHasTouch()){
			$("body").attr("id","default").attr("class","slideshowTemplate mobile");
		}else{
			$("body").attr("id","default").attr("class","slideshowTemplate");
		}
	
		$(".wp-caption").css("width","auto");
	
		//set images
		$(".content").find(".wp-caption").hide();
		//move/reset images
		$(".content").find(".wp-caption").appendTo(".images");
		$(".images").find(".wp-caption").eq(0).show();
	
		//clickthrough
		if(slideshowClickThrough){
			$(".images").find(".wp-caption").find("a").attr("href","javascript:void(0)").attr("class","clickable");
			$(".images").find(".wp-caption").click(function(){
				moveRightsl();
			});
		}
	
		//set info
		$(".info").width(500);

		//stylize links
		$("img").each(function(){
			if($(this).parent().is("a")){
				$(this).parent().css("border","0");
			}
		});

		//resize images, columnize, determine width
		calibrateS("initial");

		//hide children
		if(hideChildren){
			$("#nav").find(".children, .sub-menu").each(function(){
				if($(this).parents(".current-page-parent").length < 1) $(this).hide();
			});
			$(".children").each(function(){
				$(this).parent().find("a").eq(0).attr("href","javascript:void(0)").click(function(){
					$(this).parent().find(".children").eq(0).slideToggle();
				});
			});
			$(".sub-menu").each(function(){
				$(this).parent().find("a").eq(0).attr("href","javascript:void(0)").click(function(){
					$(this).parent().find(".sub-menu").eq(0).slideToggle();
				});
			});
			$(".current_page_parent, .current_page_item, .current_menu_item").each(function(){
				$(this).find("a").eq(0).addClass("selected");
			});
			if(showPathTo){
				$(".current_page_parent, .current_page_item, .current_menu_item, .current_page_ancestor, .current-cat-parent").each(function(){
					$(this).find(".children, .sub-menu").eq(0).show();
				});
				$(".current_page_parent, .current_page_item, .current_menu_item, .current_page_ancestor").show();
			}
		}
		
		slideshowSetContent();
		
		if(slideAuto){
			slideshowInt = setInterval(function(){ moveRightsl(); },slideAutoSpeed);
		}

		$("#cover").fadeOut();
		$("#container").animate({
			"opacity":1
		});
	});

	hasLoaded = 0;
	$(window).load(function(){
		//set width
		$("#container").width($(".tracer").offset().left-navOffset-colMargin);
		$("body").width($(".tracer").offset().left);
		hasLoaded = 1;
	});

	/*
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		On resize functions ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
	*/

	$(window).resize(function(){
		if(dynamicResize){
			h = $(window).height() - heightSubtract;
			$("body, #container").width(9999999);
			calibrateS();
			slideshowSetContent();
		}
	});

	/*
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		Calibrate Function  ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
	*/

	function calibrateS(type){
		if(typeof(type)==='undefined') a = "secondary";
		//resize images and videos
		$(".post").find("img,video,object,embed,iframe").each(function(){
	
			if(resizeITo == "none"){
				newHeight = h;
			}else if(resizeITo == "max"){
				if(h > $(this).attr("height")){
					newHeight = $(this).attr("height");
				}else{
					newHeight = h;
				}
			}else{
				newHeight = resizeITo;
			}
		
			height = $(this).attr("height");
			width = $(this).attr("width");
			heightRatio = newHeight/height;
			$(this).height(newHeight).width(width*heightRatio);
		});
		if(titlePos){
			$(".info").css("top",h+100+"px");
		}
		$("#container").width($(".tracer").offset().left-navOffset-colMargin);
		$("body").width($(".tracer").offset().left);
	}
	
	/*
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		Set Content   ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
	*/
	
	function slideshowSetContent(){
		if(showText){
			ssw = pageWidth;
			if( ($(window).width() - menuWidth - menuMargin - colMargin - menuMarginLeft) < pageWidth){
				ssw = $(window).width() - menuWidth - menuMargin - colMargin - menuMarginLeft;
			}
			$(".content").find("p,blockquote,h1,h2,h3,h4,h5,strong,b").each(function(){
				if($(this).find("input").length < 1 && jQuery.trim($(this).text()) == ""){
					$(this).remove();
				} 
			});
			$(".content").width(ssw).css("margin-top",$(".wp-caption").eq(curr).height()+colMargin+"px").show();
		}
	}


	/*
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		Keypress Navigation   ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
	*/

	if(keyNav){
		$(document).keydown(function(e){
			if (e.keyCode == 37) {  //left
				moveLeftsl();
				return false;
			}
			if (e.keyCode == 39) {  //right
				moveRightsl();
				return false;
			}
		});
	}

	/*
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		Move Functions  ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
	*/

	//initialize current position
	curr = 0;
	function moveLeftsl(){
		if(curr > 0){
			$(".wp-caption").eq(curr).fadeOut(advanceSpeed);
			$(".wp-caption").eq(curr-1).fadeIn(advanceSpeed);
			curr--;
		}else{
			$(".wp-caption").eq(curr).fadeOut(advanceSpeed);
			$(".wp-caption").eq($(".wp-caption").length-1).fadeIn(advanceSpeed);
			curr = $(".wp-caption").length-1;
		}
		slideshowSetContent();
		if(slideAuto){
			clearInterval(slideshowInt);
			slideshowInt = setInterval(function(){ moveRightsl(); },slideAutoSpeed);
		}
	}
	function moveRightsl(){
		if($(".wp-caption").eq(curr+1).length > 0){
			$(".wp-caption").eq(curr).fadeOut(advanceSpeed);
			$(".wp-caption").eq(curr+1).fadeIn(advanceSpeed);
			curr++;
		}else{
			$(".wp-caption").eq(curr).fadeOut(advanceSpeed);
			$(".wp-caption").eq(0).fadeIn(advanceSpeed);
			curr = 0;
		}
		slideshowSetContent();
		if(slideAuto){
			clearInterval(slideshowInt);
			slideshowInt = setInterval(function(){ moveRightsl(); },slideAutoSpeed);
		}
	}
	$("#moveLeft").click(function(){
		moveLeftsl();
	});
	$("#moveRight").click(function(){
		moveRightsl();
	});
}
//gallery template
if(galleryTemplate && !mobile){

	/*
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		Onload Functions  ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
	*/

	$(document).ready(function(){

		$("body").attr("id","gallery");
		
		//if password protected
		if($("#pass").length > 0){
			pass = true;
		}else{
			pass = false;
		}
	
		if(!pass){
			if($("#gallery_overview").length < 1){
				//move images
				$(".content").find(".wp-caption").appendTo("#thumbs");
				$(".content").find("img,iframe,video,object").addClass("lbc").appendTo("#thumbs");
				$("#thumbs").find(".wp-caption").find("a").attr("href","javascript:void(0)");
				$("#thumbs").find("img").addClass("lbc");
	
				//assign number to images
				$("#thumbs").find(".lbc").each(function(i){
					$(this).attr("id","lbc"+i);
				});
			}else{
				//move images
				$(".content").find("a").appendTo("#thumbs");
				$("#thumbs").find("a").addClass("lbc");
	
				//assign number to images
				$("#thumbs").find(".lbc").each(function(i){
					$(this).attr("id","lbc"+i);
				});
			}
		}
	
		//lightbox
		lbi = 0;
		$(".lbc").click(function(e){
	
			//id
			tidc = $(this).attr("id");
			tidc = tidc.replace("lbc","");
			lbi = parseInt(tidc);
	
			//reset
			$("#lightboximage").html("");
			$("#arr").hide();
		
			//set
			wh = $(window).height();
			nwh = lightboxheight*wh;
			th = $(this).attr("height");
			hr = nwh/th;
			tw = $(this).attr("width");
			$("#lightboximage").height(nwh).width(hr*tw).css("margin","-"+nwh/2+"px 0 0 -"+(hr*tw)/2+"px");
			$(this).clone().height(nwh).width(hr*tw).appendTo("#lightboximage");
			
			//caption
			lbccc = "";
			if($(this).parents(".wp-caption").find(".wp-caption-text").length > 0){
				lbccc = $(this).parents(".wp-caption").find(".wp-caption-text").text();
			}
			$("#lightboxcaption").text(lbccc).css("top",nwh+((wh-nwh)/2)+15+"px");
		
			//fade-in
			$("#lightboxbackground, #lightboximage, #lightboxcaption").fadeIn();
		
		});
	
		//lightbox arrow
		$("#lightboxbackground").mousemove(function(e){
			$("#arr").html("&#10005;").css("left",e.pageX+"px").css("top",e.pageY+20+"px").show();
		});
		$("#lightboximage").mousemove(function(e){
			if(e.pageX > $(window).width()/2){		
				$("#arr").html("&rarr;").css("left",e.pageX+"px").css("top",e.pageY+20+"px").show();
			}else{
				$("#arr").html("&larr;").css("left",e.pageX+"px").css("top",e.pageY+20+"px").show();
			}
		});
	
		//lightbox actions
		$("#lightboxbackground").click(function(){
			$("#arr,#lightboxbackground,#lightboximage,#lightboxcaption").fadeOut();
		});
		$("#lightboximage").click(function(e){
			if(e.pageX > $(window).width()/2){
				if((lbi+1) < ($(".lbc").length-1)){
					lbi++;
					setlbImage(lbi);
				}else{
					lbi = 0;
					setlbImage(lbi);
				}
			}else{
				if(lbi > 0){
					lbi--;
					setlbImage(lbi);
				}else{
					lbi = $(".lbc").length-2;
					setlbImage(lbi);
				}
			}
			if(e.pageX > $(window).width()/2){		
				$("#arr").html("&rarr;").css("left",e.pageX+"px").css("top",e.pageY+20+"px").show();
			}else{
				$("#arr").html("&larr;").css("left",e.pageX+"px").css("top",e.pageY+20+"px").show();
			}
		});
		function setlbImage(lbiid){
			//reset
			$("#lightboximage").html("");
			$("#arr").hide();
		
			//set
			wh = $(window).height();
			nwh = lightboxheight*wh;
			th = $(".lbc").eq(lbiid).attr("height");
			hr = nwh/th;
			tw = $(".lbc").eq(lbiid).attr("width");
			$("#lightboximage").height(nwh).width(hr*tw).css("margin","-"+nwh/2+"px 0 0 -"+(hr*tw)/2+"px");
			$(".lbc").eq(lbiid).clone().height(nwh).width(hr*tw).appendTo("#lightboximage");
			
			//caption
			lbccc = "";
			if($(".lbc").eq(lbiid).parents(".wp-caption").find(".wp-caption-text").length > 0){
				lbccc = $(".lbc").eq(lbiid).parents(".wp-caption").find(".wp-caption-text").text();
			}
			$("#lightboxcaption").text(lbccc).css("top",nwh+((wh-nwh)/2)+15+"px");
		}

		//stylize links
		$("img").each(function(){
			if($(this).parent().is("a")){
				$(this).parent().css("border","0");
			}
		});

		//hide children
		if(hideChildren){
			$("#nav").find(".children, .sub-menu").each(function(){
				if($(this).parents(".current-page-parent").length < 1) $(this).hide();
			});
			$(".children").each(function(){
				$(this).parent().find("a").eq(0).attr("href","javascript:void(0)").click(function(){
					$(this).parent().find(".children").eq(0).slideToggle();
				});
			});
			$(".sub-menu").each(function(){
				$(this).parent().find("a").eq(0).attr("href","javascript:void(0)").click(function(){
					$(this).parent().find(".sub-menu").eq(0).slideToggle();
				});
			});
			$(".current_page_parent, .current_page_item, .current_menu_item").each(function(){
				$(this).find("a").eq(0).addClass("selected");
			});
			if(showPathTo){
				$(".current_page_parent, .current_page_item, .current_menu_item, .current_page_ancestor, .current-cat-parent").each(function(){
					$(this).find(".children, .sub-menu").eq(0).show();
				});
				$(".current_page_parent, .current_page_item, .current_menu_item, .current_page_ancestor").show();
			}
		}
	
		if(keyNav){
			$(document).keydown(function(e){
				if($("#lightboximage").is(":visible")){
					if (e.keyCode == 37) {  //left
						if(lbi > 0){
							lbi--;
							setlbImage(lbi);
						}else{
							lbi = $(".lbc").length-2;
							setlbImage(lbi);
						}
						return false;
					}
					if (e.keyCode == 39) {  //right
						if((lbi+1) < ($(".lbc").length-1)){
							lbi++;
							setlbImage(lbi);
						}else{
							lbi = 0;
							setlbImage(lbi);
						}
						return false;
					}
					if (e.keyCode == 27) { //esc
						$("#arr,#lightboxbackground,#lightboximage,#lightboxcaption").fadeOut();
					}
				}
			});
		}

		galleryResize();

		$("#cover").fadeOut();
		$("#container").animate({
			"opacity":1
		});
	});

	$(window).resize(function(){
		galleryResize();
	
		wh = $(window).height();
		nwh = lightboxheight*wh;
		th = $("#lightboximage").find(".lbc").attr("height");
		hr = nwh/th;
		tw = $("#lightboximage").find(".lbc").attr("width");
		$("#lightboximage").height(nwh).width(hr*tw).css("margin","-"+nwh/2+"px 0 0 -"+(hr*tw)/2+"px");
		$("#lightboximage").find(".lbc").height(nwh).width(hr*tw);
	});


	function galleryResize(){
		if(!pass){
			/*$(".removeClear").remove();
			perRow = Math.floor($("#container").width()/(imgWidth+imgMargin));
			for(i=perRow;i<$("#thumbs img").length;i+=perRow){
				$("<div class='clear removeClear' />").insertBefore($("#thumbs img").eq(i));
			}*/
			$("#container").width($(window).width() - $(".post").eq(0).offset().left);
			$(".wp-caption").css("width",imgWidth+imgMargin+"px");
			$("body").width($(window).width() - (imgMargin));
		}
	}

}
//overview slideshow
if(overviewSlideShow){
	var isCtrl = false;
	$("body").append("<div id='presentation'><div id='presentationImages'></div><div id='presentationPool'></div></div>");
	$("body").find("img").clone().appendTo("#presentationPool");
	$("#presentationPool").find("img").eq(0).clone().appendTo("#presentationImages");
	presi = 0;
	$(document).keydown(function(e){
		if(e.keyCode == 65 && e.shiftKey) {
			$("#presentation").fadeIn();
			$("body,html").css("overflow","hidden");
			return false;
		}
		if($("#presentation").is(":visible")){
			if (e.keyCode == 37) {  //left
				presentationLeft();
				return false;
			}
			if (e.keyCode == 39) {  //right
				presentationRight();
				return false;
			}
			if (e.keyCode == 27) { //esc
				$("#presentation").fadeOut();
				$("body,html").css("overflow","auto");
			}
		}
	});
	function presentationLeft(){
		$("#presentationImages").find("img").remove();
		if(presi <= 0){
			presi = $("#presentationPool").find("img").length-1;
			$("#presentationPool").find("img").eq(presi).clone().appendTo("#presentationImages");
		}else{
			presi--;
			$("#presentationPool").find("img").eq(presi).clone().appendTo("#presentationImages");
		}
	}
	function presentationRight(){
		$("#presentationImages").find("img").remove();
		if(presi < $("#presentationPool").find("img").length-1){
			presi++;
			$("#presentationPool").find("img").eq(presi).clone().appendTo("#presentationImages");
		}else{
			presi = 0;
			$("#presentationPool").find("img").eq(presi).clone().appendTo("#presentationImages");
		}
	}
}
	})(jQuery);
</script>	<script type='text/javascript' src='http://wangyishu.cc/wp-content/themes/COLr/scripts/retina.js?ver=1.3'></script>
<script type='text/javascript' src='http://wangyishu.cc/wp-includes/js/wp-embed.min.js?ver=4.9.15'></script>
	
</body>
</html>

<!DOCTYPE html>
<html lang="zh-CN">

<head>

<title>wangyishu 王轶庶</title>

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="description" content="王轶庶的个人网站">
<link rel="profile" href="http://gmpg.org/xfn/11">
<link rel="pingback" href="http://wangyishu.cc/xmlrpc.php">

<link rel='dns-prefetch' href='//s.w.org' />
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/11\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/11\/svg\/","svgExt":".svg","source":{"concatemoji":"http:\/\/wangyishu.cc\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.9.15"}};
			!function(a,b,c){function d(a,b){var c=String.fromCharCode;l.clearRect(0,0,k.width,k.height),l.fillText(c.apply(this,a),0,0);var d=k.toDataURL();l.clearRect(0,0,k.width,k.height),l.fillText(c.apply(this,b),0,0);var e=k.toDataURL();return d===e}function e(a){var b;if(!l||!l.fillText)return!1;switch(l.textBaseline="top",l.font="600 32px Arial",a){case"flag":return!(b=d([55356,56826,55356,56819],[55356,56826,8203,55356,56819]))&&(b=d([55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447],[55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447]),!b);case"emoji":return b=d([55358,56760,9792,65039],[55358,56760,8203,9792,65039]),!b}return!1}function f(a){var c=b.createElement("script");c.src=a,c.defer=c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var g,h,i,j,k=b.createElement("canvas"),l=k.getContext&&k.getContext("2d");for(j=Array("flag","emoji"),c.supports={everything:!0,everythingExceptFlag:!0},i=0;i<j.length;i++)c.supports[j[i]]=e(j[i]),c.supports.everything=c.supports.everything&&c.supports[j[i]],"flag"!==j[i]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[j[i]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(h=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",h,!1),a.addEventListener("load",h,!1)):(a.attachEvent("onload",h),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),g=c.source||{},g.concatemoji?f(g.concatemoji):g.wpemoji&&g.twemoji&&(f(g.twemoji),f(g.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel='stylesheet' id='style-name-css'  href='http://wangyishu.cc/wp-content/themes/COLr/style.css?ver=4.9.15' type='text/css' media='all' />
<script type='text/javascript' src='http://wangyishu.cc/wp-includes/js/jquery/jquery.js?ver=1.12.4'></script>
<script type='text/javascript' src='http://wangyishu.cc/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.4.1'></script>
<script type='text/javascript' src='http://wangyishu.cc/wp-content/themes/COLr/scripts/columnizer.js?ver=4.9.15'></script>
<script type='text/javascript' src='http://wangyishu.cc/wp-content/themes/COLr/scripts/touchwipe.js?ver=4.9.15'></script>
<script type='text/javascript' src='http://wangyishu.cc/wp-content/themes/COLr/scripts/mousewheel.js?ver=4.9.15'></script>
<link rel='https://api.w.org/' href='http://wangyishu.cc/wp-json/' />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://wangyishu.cc/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://wangyishu.cc/wp-includes/wlwmanifest.xml" /> 
<meta name="generator" content="WordPress 4.9.15" />
<link rel="canonical" href="http://wangyishu.cc/" />
<link rel='shortlink' href='http://wangyishu.cc/' />
<link rel="alternate" type="application/json+oembed" href="http://wangyishu.cc/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fwangyishu.cc%2F" />
<link rel="alternate" type="text/xml+oembed" href="http://wangyishu.cc/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fwangyishu.cc%2F&#038;format=xml" />
<style type='text/css'>body, #cover, body.mobile #menuback, body.mobile #fullMenu { background-color:#FFFFFF; }
#menu { background-color:rgba(255, 255, 255, 1); }
body { color:#000000; }
body { font-family:helvetica, arial, sans-serif; }
body { font-size:9.5pt; }
body { line-height:16pt; }
p { padding-bottom:16pt; }
::selection { background:#EEEEEE; }
::selection { color:#000000; }
#container .post .content a, #container .post .tagcat a, #container .post .commentHold a, #container .post .info a { color:#000000; }
#container .post .content a:hover, #container .post .tagcat a:hover, #container .post .commentHold a:hover, #container .post .info a:hover { color:#000000; }
a, #container .post .info .title a, #menu #title a { border-bottom:1px solid #FFFFFF; }
a:hover, #container .post .info .title a:hover, #menu #title a:hover { border-bottom:1px solid #000000; }
blockquote { color:#AAAAAA; }
blockquote { padding:10px; }
h1 { font-size:19pt; }
h1 { line-height:26pt; }
h2 { font-size:17pt; }
h2 { line-height:24pt; }
h3 { font-size:15pt; }
h3 { line-height:22pt; }
h4 { font-size:13pt; }
h4 { line-height:20pt; }
h5 { font-size:11pt; }
h5 { line-height:18pt; }
#menu { width:200px; }
#menu { padding-right:40px; }
#menu { padding-left:40px; }
#menu { padding-left:40px; }
#menu #title { margin-bottom:40px; }
#menu #title h1 a { color:#000000; }
#menu #title h1 a:hover { color:#000000; }
#menu #title h1 a { border-bottom:1px solid #FFFFFF; }
#menu #title h1 a:hover { border-bottom:1px solid #000000; }
#menu #title h1 { font-size:9.5pt; }
#menu #title h1 { line-height:16pt; }
#menu #nav>ul { margin-bottom:40px; }
#menu #nav ul li a { border-bottom:1px solid #FFFFFF; }
#menu #nav ul li a:hover { border-bottom:1px solid #000000; }
#menu #nav ul li a { font-size:9.5pt; }
#menu #nav ul li a { line-height:16pt; }
#menu #nav ul li a { color:#000000; }
#menu #nav ul li a:hover { color:#000000; }
#menu #description { margin-bottom:40px; }
#menu #nav ul li ul.children, #menu #nav ul li ul.sub-menu { margin-left:8px; }
#menu #nav ul.children li a.selected, #menu #nav ul.sub-menu li a.selected, #menu #nav ul li a.selected, #menu #nav ul li.current-cat a { border-bottom:1px solid #DDDDDD; }
#container .post .info .title a, #container .post .info .title { color:#000000; }
#container .post .info .title a { border-bottom:1px solid #FFFFFF; }
#container .post .info .title a:hover { border-bottom:1px solid #000000; }
#container, #menu { padding-top:40px; }
#container .post .info .section { margin-bottom:40px; }
body#default #container .post .info, body#vertical #container .post .info { font-size:9.5pt; }
body#default #container .post .info, body#vertical #container .post .info { line-height:16pt; }
#container .post .imageElement, #container .post .tagcat { margin-right:40px; }
#container .post .wp-caption .wp-caption-text { font-size:9.5pt; }
#container .post .wp-caption .wp-caption-text { color:#000000; }
body#fullScreen #menu #nav ul li a, body#fullScreen #title a { color:#000000; }
body#fullScreen #menu #nav ul li a, body#fullScreen #title a { border-bottom:1px solid #FFFFFF; }
body#fullScreen #menu #nav ul li a:hover, body#fullScreen #title a:hover { color:#000000; }
body#fullScreen #menu #nav ul li a:hover, body#fullScreen #title a:hover { border-bottom:1px solid #000000; }
body#fullScreen #foldOut, body#fullScreen #foldCover { background:#FFFFFF; }
body#fullScreen #foldOut, body#fullScreen #foldCover { width:200px; }
body#fullScreen #foldOut #hold { padding:40px; }
body#fullScreen #foldCover { height:40px; }
body#fullScreen #info { color:#FFFFFF; }
body#fullScreen #info { border:2px solid #FFFFFF; }
body#fullScreen #infoHold { padding:40px; }
body#gallery #thumbs img { width:200px; }
body#gallery #thumbs img { margin:0 40px 40px 0; }
#container #pagination a { color:#000000; }
#container #pagination a:hover { color:#000000; }
#container #pagination a { border-bottom:1px solid #FFFFFF; }
#container #pagination a:hover { border-bottom:1px solid #000000; }
body.mobile #nav-toggle span, body.mobile #nav-toggle span:before, body.mobile #nav-toggle span:after { background-color:#000000; }
body.mobile #fullMenu #nav ul li a { color:#000000; }
body.mobile #menuback { border-bottom:1px solid #AAAAAA; }
body.mobile *, body.mobile #container .post .wp-caption .wp-caption-text { font-size:14pt; }
body.mobile *, body.mobile #container .post .wp-caption .wp-caption-text { line-height:21pt; }
body#fullScreen #menu { background:#FFFFFF; }
body#fullScreen #arrow { color:#000000; }
body.slideshowTemplate #container .post .content { display:block; }
body.slideshowTemplate #container .post .info { display:block; }
body#gallery #thumbs .lbc { opacity:1; }
body#gallery #thumbs .lbc:hover { opacity:1; }
body#gallery #thumbs .lbc { transition: opacity 1s ease-in-out;-moz-transition: opacity 1s ease-in-out;-webkit-transition: opacity 1s ease-in-out; }
body#gallery #lightboxbackground { background:#FFFFFF; }
body#gallery #lightboxbackground { opacity:.9; }
body#gallery a#arr { color:#000000; }
#container { padding-left:280px; }
</style>
</head>
<body class="home page-template-default page page-id-422">

				<script type="text/javascript">
			defaultTheme = true;
			fullScreenT = false;
			textTemplate = false;
			galleryTemplate = false;
			slideshowTemplate = false;
		</script>
			
	<div id="container">

					
			<div class="post" class="post-422 page type-page status-publish hentry">
				<div class="info">
					<div class="title section">©All images copyrights Wang Yishu</div>
					<div class="extended section">23 四月 2018</div>
					<div class="clear"></div>
				</div>
				<div class="content">
					<p><div class="wp-caption"><img class="alignnone size-full wp-image-455" src="http://wangyishu.cc/wp-content/uploads/2018/05/J1A8512-6_调整大小.jpg" alt="" width="1200" height="769" /></div></p> <p>New Solo Exhibition at Toronto Osgoode Subway Station,  Courtesy of Scotiabank Contact Photography Festival</p> 				</div>
			</div>

			
				
		<div class="tracer"></div>
		<div class="clear"></div>

	</div>

	
		<div id="menu">
			<div id="title">
									<h1><a href="http://wangyishu.cc">wangyishu 王轶庶</a></h1>
							</div>
			<div id="description">
				王轶庶的个人网站			</div>
			<div id="mobileNav" style="display:none">
									<ul><div class="menu-menu-container"><ul id="menu-menu" class="menu"><li id="menu-item-165" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-165"><a href="#">PROJECTS</a>
<ul class="sub-menu">
	<li id="menu-item-166" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-166"><a href="http://wangyishu.cc/borderless-2016-2017/">Borderless 2016-2017</a></li>
	<li id="menu-item-253" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-253"><a href="http://wangyishu.cc/open-ending-2009-2015/">Open-Ending 2005-2015</a></li>
	<li id="menu-item-320" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-320"><a href="http://wangyishu.cc/return-2003-2005/">Return  2003-2005</a></li>
</ul>
</li>
<li id="menu-item-403" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-403"><a href="#"></p></a>
<ul class="sub-menu">
	<li id="menu-item-421" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-421"><a href="http://wangyishu.cc/book/">book</a></li>
	<li id="menu-item-394" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-394"><a href="http://wangyishu.cc/%e5%b1%95%e8%a7%88/">Installation views</a></li>
	<li id="menu-item-406" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-406"><a href="http://wangyishu.cc/bio/">Bio</a></li>
	<li id="menu-item-417" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-417"><a href="http://wangyishu.cc/contact/">Contact</a></li>
</ul>
</li>
<li id="menu-item-407" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-407"><a href="#"></p></a></li>
<li id="menu-item-397" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-397"><a href="http://wangyishu.cc/blog/">Art Review</a></li>
</ul></div></ul><ul><div class="textwidget custom-html-widget"><a href="https://www.instagram.com/yishuwang/" target="_blank" rel="noopener"><img class="alignnone wp-image-445" src="http://wangyishu.cc/wp-content/uploads/2018/04/timg-1.jpg" alt="" width="30" height="30" /></a></div></ul>							</div>
			<div id="nav">
				<ul><div class="menu-menu-container"><ul id="menu-menu-1" class="menu"><li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-165"><a href="#">PROJECTS</a>
<ul class="sub-menu">
	<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-166"><a href="http://wangyishu.cc/borderless-2016-2017/">Borderless 2016-2017</a></li>
	<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-253"><a href="http://wangyishu.cc/open-ending-2009-2015/">Open-Ending 2005-2015</a></li>
	<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-320"><a href="http://wangyishu.cc/return-2003-2005/">Return  2003-2005</a></li>
</ul>
</li>
<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-403"><a href="#"></p></a>
<ul class="sub-menu">
	<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-421"><a href="http://wangyishu.cc/book/">book</a></li>
	<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-394"><a href="http://wangyishu.cc/%e5%b1%95%e8%a7%88/">Installation views</a></li>
	<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-406"><a href="http://wangyishu.cc/bio/">Bio</a></li>
	<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-417"><a href="http://wangyishu.cc/contact/">Contact</a></li>
</ul>
</li>
<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-407"><a href="#"></p></a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-397"><a href="http://wangyishu.cc/blog/">Art Review</a></li>
</ul></div></ul><ul><div class="textwidget custom-html-widget"><a href="https://www.instagram.com/yishuwang/" target="_blank" rel="noopener"><img class="alignnone wp-image-445" src="http://wangyishu.cc/wp-content/uploads/2018/04/timg-1.jpg" alt="" width="30" height="30" /></a></div></ul>			</div>
		</div>
		
		<div id="cover"></div>	
<script type="text/javascript">
		(function($) {
heightSubtract = 190;
colWidth = 200;
colMargin = 40;
menuWidth = 200;
menuMargin = 40;
menuMarginLeft = 40;
menuState = 'absolute';
navOffset = menuWidth + menuMargin + menuMarginLeft - (colMargin*2);
dynamicResize = true;
hideChildren = false;
showPathTo = true;						//default: true
resizeITo = 'none';
mouseWheel = false;
keyNav = true;
trackPos = true;						//default: true
autoAdvance = false;
returnScroll = false;
prevText = '→';
nextText = '←';
titlePos = false;

//mobile template
mobileOn = true;
mobileresizeIToWidth = "none";			//default: "none", other options: "max", numerical value
mobileresizeIToHeight = "none";			//default: "none", other options: "max", numerical value
touchWipe = false;						//default: false
tapAdvance = false;						//default: false

//fullscreen template
clickThrough = false;
clickAdvance = 'forward';
fullAuto = false;
fullAutoSpeed = 6000;
showArrows = true;
showmb = true;
fullscreenInfoShow = false;
fullscreenInfoWidth = 200;
fullscreenInfoPadding = 40;

//text template
pageWidth = 800;
minPageWidth = 400;
adaptiveScale = true;

//slideshow template
showText = true;
slideAuto = false;
slideAutoSpeed = 6000;
advanceSpeed = 500;
slideshowClickThrough = true;

//gallery template
imgWidth = 200;
imgMargin = 40;
lightboxheight = 0.8;
overviewSlideShow = false;

function UtilityHasTouch(){    
	var agent   = navigator.userAgent;
	if(agent.match(/(iPhone|iPod|Blackberry|Android)/)){
		return true;
	}else{
		return false;
	}
}

if(mobileOn && UtilityHasTouch()){
	mobile = true;
}else{
	mobile = false;
}

//mobile template
if(mobile){

	//reset options for mobile
	heightSubtract = 120;
	colWidth = 300;
	colMargin = 30;
	menuWidth = 0;
	menuMargin = 0;
	menuMarginLeft = 0;
	menuState = 'absolute';
	navOffset = menuWidth + menuMargin + menuMarginLeft - (colMargin*2);
	lazyLoad = false;
	dynamicResize = true;
	resizeITo = 'none';

	//text template
	pageWidth = 1000;

	minPageWidth = 100;

	/*
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		On load functions ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
	*/

	$(document).ready(function(){

		$(".wp-caption").css("width","auto");

		$("#nav").hide();
		$("body").addClass("mobile");

		//add menu link
		$("body").append("<div id='menuback'></div>");
		$("body").append("<div id='fullMenu' style='display:none;width:200px;'><div id='inf' style='width:200px;'></div></div>");
		$("body").append('<a id="nav-toggle" href="#"><span></span></a>');
		$("body").append("<div id='menuTitle'><div class='inner'>"+$("#title").html()+"</div></div>");
		if($("#mobileNav").length > 0){
			$("#mobileNav").show().appendTo("#inf");
			$("#nav").hide();
		}else{
			$("#nav").show().appendTo("#inf");
		}

		//setup menu functions				
		$("#nav-toggle").click(function(){
			this.classList.toggle("active");
			l = $(window).scrollLeft();
			if($("#fullMenu").is(":hidden")){
				$("#fullMenu").stop().animate({ width: 'toggle'});
			}else{
				$("#fullMenu").stop().animate({ width: 'toggle'});
			}
		});
		
		//remove br
		$(".content").each(function(){
			//$('img, .wp-caption').nextUntil(':not(br)').remove();
		});

	});

}
//default template
if(defaultTheme && !mobile){
	/*
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		On load functions ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
	*/

	$(document).ready(function(){
	
		var agent = navigator.userAgent;
		if(agent.match(/(iPad)/)){
			$("meta[name='viewport']").attr("content", "minimum-scale=1.0, height=device-height");
		}

		h = $(window).height() - heightSubtract;
		
		if(h < 250){
			h = 250;
		}
	
		$("body").attr("id","default");
	
		$(".wp-caption").css("width","auto");

		$(".post").each(function(){
			//set active
			$(this).find(".content").addClass("	active");
			//wrap unwrapped text nodes
			var textnodes = getTextNodesIn($(this).find(".content")[0]);
			for(var i=0; i < textnodes.length; i++){
				if($(textnodes[i]).parent().is(".content")){
					$(textnodes[i]).wrap("<p>");
				}
			}
			//separate images & videos
			$(this).find("img,iframe,video,object").not(".inColumn").each(function(i){
				if($(this).parents(".wp-caption").length > 0){
					$("<div class='content next'>").insertAfter(".active").append($(this).parents(".wp-caption").nextAll());
					$(".active").removeClass("active");
					$("<div class='imageElement' width='"+$(this).attr("width")+"' height='"+$(this).attr("height")+"'>").insertBefore(".next").append($(this).parents(".wp-caption"));
					$(".next").removeClass("next").addClass("active");
				}else if($(this).parents("a").length > 0){ 
					$("<div class='content next'>").insertAfter(".active").append($(this).parents("a").nextAll());
					$(".active").removeClass("active");
					$("<div class='imageElement' width='"+$(this).attr("width")+"' height='"+$(this).attr("height")+"'>").insertBefore(".next").append($(this).parents("a"));
					$(".next").removeClass("next").addClass("active");
				}else{
					$("<div class='content next'>").insertAfter(".active").append($(this).nextAll());
					$(".active").removeClass("active");
					$("<div class='imageElement' width='"+$(this).attr("width")+"' height='"+$(this).attr("height")+"'>").insertBefore(".next").append($(this));
					$(".next").removeClass("next").addClass("active");	
				}
			});
			//remove empty .content divs
			$(this).find(".content").each(function(){
				if(jQuery.trim($(this).text()) == "") $(this).remove();
			});
			//remove empty text elements
			$(this).find("p,blockquote,h1,h2,h3,h4,h5").each(function(){
				if(jQuery.trim($(this).text()) == "" && $(this).parents("#respond").length <= 0 && $(this).find("input").length <= 0) $(this).remove();
			});
			//remove .active
			$(".active").removeClass("active");
			//assign .ie
			$(".imageElement, .column, #container").addClass("ie");
		});

		//stylize links
		$("img").each(function(){
			if($(this).parent().is("a")){
				$(this).parent().css("border","0");
			}
		});

		//insert line break after paragraph tag
		$(".content").find("p").after("<br />");

		//resize images, columnize, determine width
		calibrate("initial");

		//hide children
		if(hideChildren){
			$("#nav").find(".children, .sub-menu").each(function(){
				//if($(this).parents(".current-page-parent").length < 1) $(this).hide();
				if(!$(this).parent().parent().is(".current-page-parent")) $(this).hide();
			});
			$(".children").each(function(){
				$(this).parent().find("a").eq(0).attr("href","javascript:void(0)").click(function(){
					$(this).parent().find(".children").eq(0).slideToggle();
				});
			});
			$(".sub-menu").each(function(){
				$(this).parent().find("a").eq(0).attr("href","javascript:void(0)").click(function(){
					$(this).parent().find(".sub-menu").eq(0).slideToggle();
				});
			});
			$(".current_page_parent, .current_page_item, .current_menu_item").each(function(){
				$(this).find("a").eq(0).addClass("selected");
			});
			if(showPathTo){
				$(".current_page_parent, .current_page_item, .current_menu_item, .current_page_ancestor, .current-cat-parent").each(function(){
					$(this).find(".children, .sub-menu").eq(0).show();
				});
				$(".current_page_parent, .current_page_item, .current_menu_item, .current_page_ancestor").show();
			}
		}

		$("#cover").fadeOut();
		$("#container").animate({
			"opacity":1
		});
	});

	hasLoaded = 0;
	$(window).load(function(){
		//set width
		$("#container").width($(".tracer").offset().left-navOffset-colMargin);
		$("body").width($(".tracer").offset().left);
		hasLoaded = 1;
	});

	/*
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		On resize functions ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
	*/

	$(window).resize(function(){
		if(dynamicResize){
			h = $(window).height() - heightSubtract;
			if(h < 250){
				h = 250;
			}
			$("body, #container").width(9999999);
			calibrate();
		}
	});

	/*
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		Calibrate Function  ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
	*/

	function calibrate(type){
		if(typeof(type)==='undefined') a = "secondary";
		//set videos
		$(".mejs-container").each(function(){
			var attr = $(this).attr('width');
			if (typeof attr == typeof undefined || attr == false) {
				$(this).attr('width',$(this).find("video").attr("width"));
			}
			var attr = $(this).attr('height');
			if (typeof attr == typeof undefined || attr == false) {
				$(this).attr('height',$(this).find("video").attr("height"));
			}
		});
		//resize images and videos
		$(".post").find("img,video,object,embed,iframe,.mejs-container").not(".inColumn").each(function(){
	
			if(resizeITo == "none"){
				newHeight = h;
			}else if(resizeITo == "max"){
				if(h > $(this).attr("height")){
					newHeight = $(this).attr("height");
				}else{
					newHeight = h;
				}
			}else{
				newHeight = resizeITo;
			}
		
			height = $(this).attr("height");
			width = $(this).attr("width");
			heightRatio = newHeight/height;
			$(this).height(newHeight).width(width*heightRatio);
			$(this).parents(".wp-caption").width(width*heightRatio);
		});
		if(titlePos){
			$(".info").css("top",h+100+"px");
		}
		if(type == "initial"){ //if first run-through
			//columnize
			$(".content,#commentsList").each(function(){
				var $tc = $(this);
				$tc.columnize({
					buildOnce:true,
					doneFunc: function(){
						rebuildColumns($tc,type);
					},
					height:h,
					width:colWidth
				});
			});
		}else{ //if resize
			//reset
			$(".content,.column,#commentsList").css("float","none");
			$(".column").contents().unwrap();
			$(".column").remove();
			if($("#container").find("img,video,object,embed,iframe").length > 0) $(".content").css('width', 'auto');
			$("body,#container").width(999999);
			$(".ie").removeClass("ie");
			//combine split
			$(".split").each(function(){
				if($(this).next().is(".split") && $(this).next().is($(this).get(0).tagName)){
					$(this).contents().prependTo($(this).next());
					$(this).remove();
				}
			});
			//columnize
			$(".content,#commentsList").each(function(){
				var $tc = $(this);
				$tc.columnize({
					buildOnce:true,
					doneFunc: function(){
						rebuildColumns($tc,type);
					},
					height:h,
					width:colWidth
				});
			});
		}
		if($(".content").length <= 0){
			$(".imageElement, .column, #container").addClass("ie");
			if((dynamicResize && type != "initial") || hasLoaded == 1){
				//set width
				$("#container").width($(".tracer").offset().left-navOffset-colMargin);
				$("body").width($(".tracer").offset().left);
			}
		}
		$(".column").width(colWidth).css("margin-right",colMargin+"px");
	}
	function rebuildColumns(t,type){
		$("body,#container").width(999999);
		//delete empty columns
		t.find(".column").each(function(){
			if(jQuery.trim($(this).text()) == "") $(this).remove();
			if($(this).children(":first").is("br")) $(this).children(":first").remove();
		});
		//reset widths
		t.find(".column").width(colWidth).css("margin-right",colMargin+"px");
		t.each(function(){
			numCol = $(this).children(".column").length;
			$(this).width((numCol*colWidth) + (numCol*colMargin));
		});
		//reset floats
		t.find(".column").css("float","left");
		t.css("float","left");
		//assign .ie class
		$(".imageElement, .column, #container").addClass("ie");
	
		$(".post").each(function(){
			if($(this).find(".content,.imageElement").length < 1){
				$(this).append("<div style='height:1px;width:"+colWidth+"px;'></div>");
			}
		});
	
		if((dynamicResize && type != "initial") || hasLoaded == 1){
			//set width
			$("#container").width($(".tracer").offset().left-navOffset-colMargin);
			$("body").width($(".tracer").offset().left);
		}
	}

	/*
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		Wrap un-wrapped Text Nodes  ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		Function comes from Arash Milani  ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		stackoverflow.com/questions/13836633/jquery-wrap-all-unwrapped-text-in-p-tags
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
	*/

	function getTextNodesIn(node, includeWhitespaceNodes) { 
		var textNodes = [], whitespace = /^\s*$/;
		function getTextNodes(node) {
			if (node.nodeType == 3) {
				if (includeWhitespaceNodes || !whitespace.test(node.nodeValue)) {
					textNodes.push(node);
				}
			}else{
				for(var i = 0, len = node.childNodes.length; i < len; ++i) {
					getTextNodes(node.childNodes[i]);
				}
			}
		}
		getTextNodes(node);
		return textNodes;
	}

	/*
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		Map mousewheel to horizontal scroll   ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		Function comes from Andy E  ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		http://stackoverflow.com/questions/2346958/how-to-do-a-horizontal-scroll-on-mouse-wheel-scroll
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
	*/

	if(mouseWheel){
		/*var mouseWheelEvt = function(e){
			var event = e || window.event;
			if (document.body.doScroll) document.body.doScroll(event.wheelDelta>0?"left":"right");
			else if ((event.wheelDelta || event.detail) > 0) document.body.scrollLeft -= 10;
			else document.body.scrollLeft += 10;
			return false;
		}
		if("onmousewheel" in document.body) document.body.onmousewheel = mouseWheelEvt;
		else document.body.addEventListener("DOMMouseScroll", mouseWheelEvt);*/
		
		$("html,body").mousewheel(function(event, delta) {
			event.preventDefault();
			this.scrollLeft -= (delta*5);
		});
		
		/*(function() {
			function scrollHorizontally(e) {
				e = window.event || e;
				var delta = Math.max(-1, Math.min(1, (e.wheelDelta || -e.detail)));
				document.documentElement.scrollLeft -= (delta*20);
				document.body.scrollLeft -= (delta*20);
				e.preventDefault();
			}
			if (window.addEventListener) {
				// IE9, Chrome, Safari, Opera
				window.addEventListener("mousewheel", scrollHorizontally, false);
				// Firefox
				window.addEventListener("DOMMouseScroll", scrollHorizontally, false);
			} else {
				// IE 6/7/8
				window.attachEvent("onmousewheel", scrollHorizontally);
			}
		})();*/
	}

	/*
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		Keypress Navigation   ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
	*/

	if(keyNav){
		$(document).keydown(function(e){
			if (e.keyCode == 37) {  //left
				moveLeft();
				return false;
			}
			if (e.keyCode == 39) {  //right
				moveRight();
				return false;
			}
		});
	}

	/*
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		Move Functions  ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
	*/

	//initialize current position
	if(menuState == "absolute"){
		curr = 0;
	}else{
		curr = 1;
	}

	//track position on page scroll
	if(trackPos){
		$(window).scroll(function(){
			navOffset2 = menuWidth + menuMargin + menuMarginLeft;
			if(menuState == "absolute") navOffset2 = 0;
			leftPos = $(window).scrollLeft()+navOffset2;
			if(menuState == "absolute") leftPos +=colMargin;
			closest = 0;
			dist = 999999;
			$(".ie").each(function(i){
				if(Math.abs($(".ie").eq(i).offset().left - leftPos) < dist){
					dist = Math.abs($(".ie").eq(i).offset().left - colMargin - leftPos);
					closest = i;
				}
			});
			curr = closest;
		});
	}

	moving = 0;
	function moveLeft(){
		if((curr > 0 && menuState == "absolute") || (curr > 1 && menuState == "fixed")){
			curr--;
			if(menuState == "absolute"){
				if(moving == 0){
					moving = 1;
					$("body,html").animate({
						"scrollLeft": $(".ie").eq(curr).offset().left - colMargin
					},function(){
						moving = 0;
					});
				}
			}else{
				if(moving == 0){
					moving = 1;
					$("body,html").animate({
						"scrollLeft": $(".ie").eq(curr).offset().left - menuMarginLeft - menuWidth - menuMargin
					},function(){
						moving = 0;
					});
				}
			}
		}else{
			if(autoAdvance){
				$("#pagination").find("a").each(function(){
					if($(this).text() == nextText) document.location.href = $(this).attr("href");
				});
			}
			if(returnScroll){
				curr = $(".ie").length - 1;
				if(menuState == "absolute"){
					if(moving == 0){
						moving = 1;
						$("body,html").animate({
							"scrollLeft": $(".ie").eq(curr).offset().left - colMargin
						},function(){
							moving = 0;
						});
					}
				}else{
					if(moving == 0){
						moving = 1;
						$("body,html").animate({
							"scrollLeft": $(".ie").eq(curr).offset().left - menuMarginLeft - menuWidth - menuMargin
						},function(){
							moving = 0;
						});
					}
				}
			}
		}
	}
	function moveRight(){
		/*if(curr < $(".ie").length){*/
		/*if(($(".ie").eq(curr).offset().left + $(window).width()) < ($("#container").width() + $(".post").eq(0).offset().left)){ //changed to move at end, not at last element*/
		if(($(window).scrollLeft() + $(window).width() + (colMargin*2)) < ($("#container").width() + $(".post").eq(0).offset().left)){
			if($(".ie").eq(curr+1).length > 0){
				curr++;
				if(menuState == "absolute"){
					if(moving == 0){
						moving = 1;
						$("body,html").animate({
							"scrollLeft": $(".ie").eq(curr).offset().left - colMargin
						},function(){
							moving = 0;
						});
					}
				}else{
					if(moving == 0){
						moving = 1;
						$("body,html").animate({
							"scrollLeft": $(".ie").eq(curr).offset().left - menuMarginLeft - menuWidth - menuMargin
						},function(){
							moving = 0;
						});
					}
				}
			}
		}else{
			if(autoAdvance){
				$("#pagination").find("a").each(function(){
					if($(this).text() == prevText) document.location.href = $(this).attr("href");
				});
			}
			if(returnScroll){
				if(menuState == "absolute"){ curr = 0; }else{ curr = 1; }
				if(menuState == "absolute"){
					if(moving == 0){
						moving = 1;
						$("body,html").animate({
							"scrollLeft": $(".ie").eq(curr).offset().left - colMargin
						},function(){
							moving = 0;
						});
					}
				}else{
					if(moving == 0){
						moving = 1;
						$("body,html").animate({
							"scrollLeft": $(".ie").eq(curr).offset().left - menuMarginLeft - menuWidth - menuMargin
						},function(){
							moving = 0;
						});
					}
				}
			}
		}
	}
}
//fullscreen template
if(fullScreenT && !mobile){

	/*
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		Onload Functions  ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
	*/

	$(document).ready(function(){

		$(".wp-caption").css("width","auto");

		h = $(window).height();
		w = $(window).width();

		$("<div id='images' />").insertBefore("#menu");
		$("body").attr("id","fullScreen");

		$(".post").each(function(){
			//separate images & videos
			$(this).find("img,iframe,video,object").each(function(i){
				if(clickThrough){
					permalink = $("#title").find("a").attr("href");
					$(this).appendTo("#images").wrap("<a class='se' href='"+permalink+"' />").hide();
				}else{
					$(this).appendTo("#images").addClass("se").hide();
				}
			});
		});
		
		if(fullscreenInfoShow){
			totalWidth = fullscreenInfoWidth+(fullscreenInfoPadding*2);
			
			$("body").append("<div id='foldOut'><div id='hold'></div></div>");
			$("body").append("<div id='foldCover'>&nbsp;</div>");
			$("body").append("<div id='infoHold'><div id='info'><div>i</div></div></div>");
			$(".content").find("p").each(function(){
				if(jQuery.trim($(this).text()) == "" && $(this).find("input").length < 1) $(this).remove();
			});
			$("#hold").html($(".content").html());
			$("#foldOut,#foldCover").width(0).show();
			
			$("#foldOut,#info,#infoHold").mousemove(function(){
				$("#arrow").hide();
			});
			
			$("#info").click(function(){
				if($(this).hasClass("close")){
					$(this).removeClass("close").html("<div>i</div>");
					$('#foldOut,#foldCover').animate({ width: 0 });
					$("#infoHold").animate({ "right": 0 });
				}else{
					$(this).addClass("close").html("<div>&times;</div>");
					$('#foldOut,#foldCover').animate({ width: totalWidth });
					$("#infoHold").animate({ "right": totalWidth });
				}
			});
		}

		$(".se").eq(0).show();
		$(".se").eq(0).find("img").show();

		/*
			~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
			~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
			~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
			Keypress Navigation   ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~
			~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
			~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
			~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		*/

		if(keyNav){
			$(document).keydown(function(e){
				if (e.keyCode == 37) {  //left
					advLeft();
					return false;
				}
				if (e.keyCode == 39) {  //right
					advRight();
					return false;
				}
			});
		}

		/*
			~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
			~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
			~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
			Click Advance ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~
			~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
			~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
			~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		*/

		if(clickAdvance != "none"){
			currPos = 0;
			$(".se").addClass("cursor");

			if(showArrows){
				$(".se").addClass("arrow");
				$("body").append("<div id='arrow' />");
				if(clickAdvance == "half"){
					$(".se").mousemove(function(e){
						if(showmb){
							if(e.pageX > (($(window).width() - $("#menu").outerWidth())/2)+$("#menu").outerWidth()){		
								$("#arrow").html("&rarr;").css("left",e.pageX+"px").css("top",e.pageY+20+"px").show();
							}else{
								$("#arrow").html("&larr;").css("left",e.pageX+"px").css("top",e.pageY+20+"px").show();
							}
						}else{
							if(e.pageX > $(window).width()/2){		
								$("#arrow").html("&rarr;").css("left",e.pageX+"px").css("top",e.pageY+20+"px").show();
							}else{
								$("#arrow").html("&larr;").css("left",e.pageX+"px").css("top",e.pageY+20+"px").show();
							}
						}
					});
				}
				if(clickAdvance == "forward"){
					$(".se").mousemove(function(e){
						$("#arrow").html("&rarr;").css("left",e.pageX+"px").css("top",e.pageY+20+"px").show();
					});
				}
				$("#menu").mousemove(function(){
					$("#arrow").hide();
				});
			}

			if(clickAdvance == "half"){
				$(".se").click(function(e){
					if(e.pageX < $(window).width()/2){
						advLeft();
					}else{
						advRight();
					}
				});
			}
			if(clickAdvance == "forward"){
				$(".se").click(function(){
					advRight();
				});
			}
		}
		
		if(fullAuto){
			fullscreenInt = setInterval(function(){ advRight(); },fullAutoSpeed);
		}

		function advRight(){
			if(currPos < $(".se").length-1){
				$(".se").eq(currPos).hide();
				currPos++;
				$(".se").eq(currPos).show();
			}else{
				$(".se").eq(currPos).hide();
				currPos=0;
				$(".se").eq(currPos).show();
			}
			if(fullAuto){
				clearInterval(fullscreenInt);
				fullscreenInt = setInterval(function(){ advRight(); },fullAutoSpeed);
			}
		}
		function advLeft(){
			if(currPos > 0){
				$(".se").eq(currPos).hide();
				currPos--;
				$(".se").eq(currPos).show();
			}else{
				$(".se").eq(currPos).hide();
				currPos = $(".se").length-1;
				$(".se").eq(currPos).show();
			}
			if(fullAuto){
				clearInterval(fullscreenInt);
				fullscreenInt = setInterval(function(){ advRight(); },fullAutoSpeed);
			}
		}

		$("#container").hide();

		//stylize links
		$("img").each(function(){
			if($(this).parent().is("a")){
				$(this).parent().css("border","0");
			}
		});

		//hide children
		if(hideChildren){
			$("#nav").find(".children, .sub-menu").each(function(){
				if($(this).parents(".current-page-parent").length < 1) $(this).hide();
			});
			$(".children").each(function(){
				$(this).parent().find("a").eq(0).attr("href","javascript:void(0)").click(function(){
					$(this).parent().find(".children").eq(0).slideToggle();
				});
			});
			$(".sub-menu").each(function(){
				$(this).parent().find("a").eq(0).attr("href","javascript:void(0)").click(function(){
					$(this).parent().find(".sub-menu").eq(0).slideToggle();
				});
			});
			$(".current_page_parent, .current_page_item, .current_menu_item").each(function(){
				$(this).find("a").eq(0).addClass("selected");
			});
			if(showPathTo){
				$(".current_page_parent, .current_page_item, .current_menu_item, .current_page_ancestor, .current-cat-parent").each(function(){
					$(this).find(".children, .sub-menu").eq(0).show();
				});
				$(".current_page_parent, .current_page_item, .current_menu_item, .current_page_ancestor").show();
			}
		}

		resizeImagesAndBody();

		$("#cover").fadeOut();
		$("#container").animate({
			"opacity":1
		});
	});

	/*
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		Window Resize ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
	*/

	$(window).resize(function(){
		resizeImagesAndBody();
	});

	function resizeImagesAndBody(){
		$("body,#container").width($(window).width()).height($(window).height());
		if(showmb) $("#images").css("margin-left",$("#menu").outerWidth()+"px");
		$("#images").find("img,iframe,video,object").each(function(i){
			oh = $(this).attr("height");
			ow = $(this).attr("width");
			wh = $(window).height();
			ww = $(window).width();
			if(showmb) ww = ww - $("#menu").outerWidth();
			wr = ww/ow;
			hr = wh/oh;
			if(wr > hr){
				nw = ow * wr;
				nh = oh * wr;
				ml = 0;
				mt = -1*((nh - $(window).height())/2);
				$(this).width(nw).height(nh).css("margin",mt+"px 0 0 "+ml+"px");
			}else{
				nw = ow * hr;
				nh = oh * hr;
				mt=0;
				ml = -1*((nw - $(window).width())/2);
				if(showmb) ml = -1*((nw - ($(window).width() - $("#menu").outerWidth()))/2);
				$(this).width(nw).height(nh).css("margin",mt+"px 0 0 "+ml+"px");
			}
		});
	}

}
//text template
if(textTemplate || mobile){

	/*
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		Onload Functions  ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
	*/

	$(document).ready(function(){

		$(".wp-caption").css("width","auto");

		$("body").attr("id","vertical");
	
		if($(".woocommerce").length < 1){
			$(".post").each(function(){
				//wrap unwrapped text nodes
				var textnodes = getTextNodesIn($(this).find(".content")[0]);
				for(var i=0; i < textnodes.length; i++){
					if($(textnodes[i]).parent().is(".content")){
						$(textnodes[i]).wrap("<p>");
					}
				}
			});
		}

		//stylize links
		$("img").each(function(){
			if($(this).parent().is("a")){
				$(this).parent().css("border","0");
			}
		});

		//hide children
		if(hideChildren){
			$("#nav, #mobileNav").find(".children, .sub-menu").each(function(){
				if($(this).parents(".current-page-parent").length < 1) $(this).hide();
			});
			$(".children").each(function(){
				$(this).parent().find("a").eq(0).attr("href","javascript:void(0)").click(function(){
					$(this).parent().find(".children").eq(0).slideToggle();
				});
			});
			$(".sub-menu").each(function(){
				$(this).parent().find("a").eq(0).attr("href","javascript:void(0)").click(function(){
					$(this).parent().find(".sub-menu").eq(0).slideToggle();
				});
			});
			$(".current_page_parent, .current_page_item, .current_menu_item").each(function(){
				$(this).find("a").eq(0).addClass("selected");
			});
			if(showPathTo){
				$(".current_page_parent, .current_page_item, .current_menu_item, .current_page_ancestor, .current-cat-parent").each(function(){
					$(this).find(".children, .sub-menu").eq(0).show();
				});
				$(".current_page_parent, .current_page_item, .current_menu_item, .current_page_ancestor").show();
			}
		}

		resizeImagesAndBodyBlog();
	
		$("p").each(function(){
			if(jQuery.trim($(this).text()) == "" && $(this).find("input").length < 1) $(this).remove();
		});

		$("#cover").fadeOut();
		$("#container").animate({
			"opacity":1
		});
	});

	$(window).resize(function(){
		resizeImagesAndBodyBlog();
	});

	function getTextNodesIn(node, includeWhitespaceNodes) { 
		var textNodes = [], whitespace = /^\s*$/;
		function getTextNodes(node) {
			if (node.nodeType == 3) {
				if (includeWhitespaceNodes || !whitespace.test(node.nodeValue)) {
					textNodes.push(node);
				}
			}else{
				for(var i = 0, len = node.childNodes.length; i < len; ++i) {
					getTextNodes(node.childNodes[i]);
				}
			}
		}
		getTextNodes(node);
		return textNodes;
	}

	function resizeImagesAndBodyBlog(){
		if(mobile) pageWidth = ($(window).width() - $(".post").offset().left - colMargin);
		if(!mobile){
			$(".post").find("img,iframe,video,object").each(function(){

				$(this).addClass("ie");

				iw = $(this).attr("width");
				ih = $(this).attr("height");

				if(adaptiveScale && ($(window).width() - $(".post").offset().left - colMargin) <= pageWidth){
					if(($(window).width() - $(".post").offset().left - colMargin) > minPageWidth){
						nw = $(window).width() - $(".post").offset().left - colMargin;
					}else{
						nw = minPageWidth;
					}
				}else{
					nw = pageWidth;
				}

				r = nw/iw;

				if(iw >= nw){ $(this).width(nw).height(r*ih); }

			});
		}else{
			$(".post").find("iframe,video,object").each(function(){

				$(this).addClass("ie");

				iw = $(this).attr("width");
				ih = $(this).attr("height");

				if(adaptiveScale && ($(window).width() - $(".post").offset().left - colMargin) <= pageWidth){
					if(($(window).width() - $(".post").offset().left - colMargin) > minPageWidth){
						nw = $(window).width() - $(".post").offset().left - colMargin;
					}else{
						nw = minPageWidth;
					}
				}else{
					nw = pageWidth;
				}

				r = nw/iw;

				if(iw >= nw){ $(this).width(nw).height(r*ih); }

			});
			$(".post img").addClass("ie");
		}

		if(adaptiveScale && ($(window).width() - $(".post").offset().left - colMargin) <= pageWidth){
			if(($(window).width() - $(".post").offset().left - colMargin) > minPageWidth){
				pw = $(window).width() - $(".post").offset().left - colMargin;
			}else{
				pw = minPageWidth;
			}
		}else{
			pw = pageWidth;
		}

		$("#container,.post").width(pw);
		$("body").width(pw+$(".post").offset().left);
	}

}
//slideshow template
if(slideshowTemplate && !mobile){
	/*
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		On load functions ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
	*/

	$(document).ready(function(){

		h = $(window).height() - heightSubtract;
	
		if(mobileOn && UtilityHasTouch()){
			$("body").attr("id","default").attr("class","slideshowTemplate mobile");
		}else{
			$("body").attr("id","default").attr("class","slideshowTemplate");
		}
	
		$(".wp-caption").css("width","auto");
	
		//set images
		$(".content").find(".wp-caption").hide();
		//move/reset images
		$(".content").find(".wp-caption").appendTo(".images");
		$(".images").find(".wp-caption").eq(0).show();
	
		//clickthrough
		if(slideshowClickThrough){
			$(".images").find(".wp-caption").find("a").attr("href","javascript:void(0)").attr("class","clickable");
			$(".images").find(".wp-caption").click(function(){
				moveRightsl();
			});
		}
	
		//set info
		$(".info").width(500);

		//stylize links
		$("img").each(function(){
			if($(this).parent().is("a")){
				$(this).parent().css("border","0");
			}
		});

		//resize images, columnize, determine width
		calibrateS("initial");

		//hide children
		if(hideChildren){
			$("#nav").find(".children, .sub-menu").each(function(){
				if($(this).parents(".current-page-parent").length < 1) $(this).hide();
			});
			$(".children").each(function(){
				$(this).parent().find("a").eq(0).attr("href","javascript:void(0)").click(function(){
					$(this).parent().find(".children").eq(0).slideToggle();
				});
			});
			$(".sub-menu").each(function(){
				$(this).parent().find("a").eq(0).attr("href","javascript:void(0)").click(function(){
					$(this).parent().find(".sub-menu").eq(0).slideToggle();
				});
			});
			$(".current_page_parent, .current_page_item, .current_menu_item").each(function(){
				$(this).find("a").eq(0).addClass("selected");
			});
			if(showPathTo){
				$(".current_page_parent, .current_page_item, .current_menu_item, .current_page_ancestor, .current-cat-parent").each(function(){
					$(this).find(".children, .sub-menu").eq(0).show();
				});
				$(".current_page_parent, .current_page_item, .current_menu_item, .current_page_ancestor").show();
			}
		}
		
		slideshowSetContent();
		
		if(slideAuto){
			slideshowInt = setInterval(function(){ moveRightsl(); },slideAutoSpeed);
		}

		$("#cover").fadeOut();
		$("#container").animate({
			"opacity":1
		});
	});

	hasLoaded = 0;
	$(window).load(function(){
		//set width
		$("#container").width($(".tracer").offset().left-navOffset-colMargin);
		$("body").width($(".tracer").offset().left);
		hasLoaded = 1;
	});

	/*
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		On resize functions ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
	*/

	$(window).resize(function(){
		if(dynamicResize){
			h = $(window).height() - heightSubtract;
			$("body, #container").width(9999999);
			calibrateS();
			slideshowSetContent();
		}
	});

	/*
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		Calibrate Function  ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
	*/

	function calibrateS(type){
		if(typeof(type)==='undefined') a = "secondary";
		//resize images and videos
		$(".post").find("img,video,object,embed,iframe").each(function(){
	
			if(resizeITo == "none"){
				newHeight = h;
			}else if(resizeITo == "max"){
				if(h > $(this).attr("height")){
					newHeight = $(this).attr("height");
				}else{
					newHeight = h;
				}
			}else{
				newHeight = resizeITo;
			}
		
			height = $(this).attr("height");
			width = $(this).attr("width");
			heightRatio = newHeight/height;
			$(this).height(newHeight).width(width*heightRatio);
		});
		if(titlePos){
			$(".info").css("top",h+100+"px");
		}
		$("#container").width($(".tracer").offset().left-navOffset-colMargin);
		$("body").width($(".tracer").offset().left);
	}
	
	/*
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		Set Content   ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
	*/
	
	function slideshowSetContent(){
		if(showText){
			ssw = pageWidth;
			if( ($(window).width() - menuWidth - menuMargin - colMargin - menuMarginLeft) < pageWidth){
				ssw = $(window).width() - menuWidth - menuMargin - colMargin - menuMarginLeft;
			}
			$(".content").find("p,blockquote,h1,h2,h3,h4,h5,strong,b").each(function(){
				if($(this).find("input").length < 1 && jQuery.trim($(this).text()) == ""){
					$(this).remove();
				} 
			});
			$(".content").width(ssw).css("margin-top",$(".wp-caption").eq(curr).height()+colMargin+"px").show();
		}
	}


	/*
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		Keypress Navigation   ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
	*/

	if(keyNav){
		$(document).keydown(function(e){
			if (e.keyCode == 37) {  //left
				moveLeftsl();
				return false;
			}
			if (e.keyCode == 39) {  //right
				moveRightsl();
				return false;
			}
		});
	}

	/*
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		Move Functions  ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
	*/

	//initialize current position
	curr = 0;
	function moveLeftsl(){
		if(curr > 0){
			$(".wp-caption").eq(curr).fadeOut(advanceSpeed);
			$(".wp-caption").eq(curr-1).fadeIn(advanceSpeed);
			curr--;
		}else{
			$(".wp-caption").eq(curr).fadeOut(advanceSpeed);
			$(".wp-caption").eq($(".wp-caption").length-1).fadeIn(advanceSpeed);
			curr = $(".wp-caption").length-1;
		}
		slideshowSetContent();
		if(slideAuto){
			clearInterval(slideshowInt);
			slideshowInt = setInterval(function(){ moveRightsl(); },slideAutoSpeed);
		}
	}
	function moveRightsl(){
		if($(".wp-caption").eq(curr+1).length > 0){
			$(".wp-caption").eq(curr).fadeOut(advanceSpeed);
			$(".wp-caption").eq(curr+1).fadeIn(advanceSpeed);
			curr++;
		}else{
			$(".wp-caption").eq(curr).fadeOut(advanceSpeed);
			$(".wp-caption").eq(0).fadeIn(advanceSpeed);
			curr = 0;
		}
		slideshowSetContent();
		if(slideAuto){
			clearInterval(slideshowInt);
			slideshowInt = setInterval(function(){ moveRightsl(); },slideAutoSpeed);
		}
	}
	$("#moveLeft").click(function(){
		moveLeftsl();
	});
	$("#moveRight").click(function(){
		moveRightsl();
	});
}
//gallery template
if(galleryTemplate && !mobile){

	/*
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		Onload Functions  ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
		~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ 
	*/

	$(document).ready(function(){

		$("body").attr("id","gallery");
		
		//if password protected
		if($("#pass").length > 0){
			pass = true;
		}else{
			pass = false;
		}
	
		if(!pass){
			if($("#gallery_overview").length < 1){
				//move images
				$(".content").find(".wp-caption").appendTo("#thumbs");
				$(".content").find("img,iframe,video,object").addClass("lbc").appendTo("#thumbs");
				$("#thumbs").find(".wp-caption").find("a").attr("href","javascript:void(0)");
				$("#thumbs").find("img").addClass("lbc");
	
				//assign number to images
				$("#thumbs").find(".lbc").each(function(i){
					$(this).attr("id","lbc"+i);
				});
			}else{
				//move images
				$(".content").find("a").appendTo("#thumbs");
				$("#thumbs").find("a").addClass("lbc");
	
				//assign number to images
				$("#thumbs").find(".lbc").each(function(i){
					$(this).attr("id","lbc"+i);
				});
			}
		}
	
		//lightbox
		lbi = 0;
		$(".lbc").click(function(e){
	
			//id
			tidc = $(this).attr("id");
			tidc = tidc.replace("lbc","");
			lbi = parseInt(tidc);
	
			//reset
			$("#lightboximage").html("");
			$("#arr").hide();
		
			//set
			wh = $(window).height();
			nwh = lightboxheight*wh;
			th = $(this).attr("height");
			hr = nwh/th;
			tw = $(this).attr("width");
			$("#lightboximage").height(nwh).width(hr*tw).css("margin","-"+nwh/2+"px 0 0 -"+(hr*tw)/2+"px");
			$(this).clone().height(nwh).width(hr*tw).appendTo("#lightboximage");
			
			//caption
			lbccc = "";
			if($(this).parents(".wp-caption").find(".wp-caption-text").length > 0){
				lbccc = $(this).parents(".wp-caption").find(".wp-caption-text").text();
			}
			$("#lightboxcaption").text(lbccc).css("top",nwh+((wh-nwh)/2)+15+"px");
		
			//fade-in
			$("#lightboxbackground, #lightboximage, #lightboxcaption").fadeIn();
		
		});
	
		//lightbox arrow
		$("#lightboxbackground").mousemove(function(e){
			$("#arr").html("&#10005;").css("left",e.pageX+"px").css("top",e.pageY+20+"px").show();
		});
		$("#lightboximage").mousemove(function(e){
			if(e.pageX > $(window).width()/2){		
				$("#arr").html("&rarr;").css("left",e.pageX+"px").css("top",e.pageY+20+"px").show();
			}else{
				$("#arr").html("&larr;").css("left",e.pageX+"px").css("top",e.pageY+20+"px").show();
			}
		});
	
		//lightbox actions
		$("#lightboxbackground").click(function(){
			$("#arr,#lightboxbackground,#lightboximage,#lightboxcaption").fadeOut();
		});
		$("#lightboximage").click(function(e){
			if(e.pageX > $(window).width()/2){
				if((lbi+1) < ($(".lbc").length-1)){
					lbi++;
					setlbImage(lbi);
				}else{
					lbi = 0;
					setlbImage(lbi);
				}
			}else{
				if(lbi > 0){
					lbi--;
					setlbImage(lbi);
				}else{
					lbi = $(".lbc").length-2;
					setlbImage(lbi);
				}
			}
			if(e.pageX > $(window).width()/2){		
				$("#arr").html("&rarr;").css("left",e.pageX+"px").css("top",e.pageY+20+"px").show();
			}else{
				$("#arr").html("&larr;").css("left",e.pageX+"px").css("top",e.pageY+20+"px").show();
			}
		});
		function setlbImage(lbiid){
			//reset
			$("#lightboximage").html("");
			$("#arr").hide();
		
			//set
			wh = $(window).height();
			nwh = lightboxheight*wh;
			th = $(".lbc").eq(lbiid).attr("height");
			hr = nwh/th;
			tw = $(".lbc").eq(lbiid).attr("width");
			$("#lightboximage").height(nwh).width(hr*tw).css("margin","-"+nwh/2+"px 0 0 -"+(hr*tw)/2+"px");
			$(".lbc").eq(lbiid).clone().height(nwh).width(hr*tw).appendTo("#lightboximage");
			
			//caption
			lbccc = "";
			if($(".lbc").eq(lbiid).parents(".wp-caption").find(".wp-caption-text").length > 0){
				lbccc = $(".lbc").eq(lbiid).parents(".wp-caption").find(".wp-caption-text").text();
			}
			$("#lightboxcaption").text(lbccc).css("top",nwh+((wh-nwh)/2)+15+"px");
		}

		//stylize links
		$("img").each(function(){
			if($(this).parent().is("a")){
				$(this).parent().css("border","0");
			}
		});

		//hide children
		if(hideChildren){
			$("#nav").find(".children, .sub-menu").each(function(){
				if($(this).parents(".current-page-parent").length < 1) $(this).hide();
			});
			$(".children").each(function(){
				$(this).parent().find("a").eq(0).attr("href","javascript:void(0)").click(function(){
					$(this).parent().find(".children").eq(0).slideToggle();
				});
			});
			$(".sub-menu").each(function(){
				$(this).parent().find("a").eq(0).attr("href","javascript:void(0)").click(function(){
					$(this).parent().find(".sub-menu").eq(0).slideToggle();
				});
			});
			$(".current_page_parent, .current_page_item, .current_menu_item").each(function(){
				$(this).find("a").eq(0).addClass("selected");
			});
			if(showPathTo){
				$(".current_page_parent, .current_page_item, .current_menu_item, .current_page_ancestor, .current-cat-parent").each(function(){
					$(this).find(".children, .sub-menu").eq(0).show();
				});
				$(".current_page_parent, .current_page_item, .current_menu_item, .current_page_ancestor").show();
			}
		}
	
		if(keyNav){
			$(document).keydown(function(e){
				if($("#lightboximage").is(":visible")){
					if (e.keyCode == 37) {  //left
						if(lbi > 0){
							lbi--;
							setlbImage(lbi);
						}else{
							lbi = $(".lbc").length-2;
							setlbImage(lbi);
						}
						return false;
					}
					if (e.keyCode == 39) {  //right
						if((lbi+1) < ($(".lbc").length-1)){
							lbi++;
							setlbImage(lbi);
						}else{
							lbi = 0;
							setlbImage(lbi);
						}
						return false;
					}
					if (e.keyCode == 27) { //esc
						$("#arr,#lightboxbackground,#lightboximage,#lightboxcaption").fadeOut();
					}
				}
			});
		}

		galleryResize();

		$("#cover").fadeOut();
		$("#container").animate({
			"opacity":1
		});
	});

	$(window).resize(function(){
		galleryResize();
	
		wh = $(window).height();
		nwh = lightboxheight*wh;
		th = $("#lightboximage").find(".lbc").attr("height");
		hr = nwh/th;
		tw = $("#lightboximage").find(".lbc").attr("width");
		$("#lightboximage").height(nwh).width(hr*tw).css("margin","-"+nwh/2+"px 0 0 -"+(hr*tw)/2+"px");
		$("#lightboximage").find(".lbc").height(nwh).width(hr*tw);
	});


	function galleryResize(){
		if(!pass){
			/*$(".removeClear").remove();
			perRow = Math.floor($("#container").width()/(imgWidth+imgMargin));
			for(i=perRow;i<$("#thumbs img").length;i+=perRow){
				$("<div class='clear removeClear' />").insertBefore($("#thumbs img").eq(i));
			}*/
			$("#container").width($(window).width() - $(".post").eq(0).offset().left);
			$(".wp-caption").css("width",imgWidth+imgMargin+"px");
			$("body").width($(window).width() - (imgMargin));
		}
	}

}
//overview slideshow
if(overviewSlideShow){
	var isCtrl = false;
	$("body").append("<div id='presentation'><div id='presentationImages'></div><div id='presentationPool'></div></div>");
	$("body").find("img").clone().appendTo("#presentationPool");
	$("#presentationPool").find("img").eq(0).clone().appendTo("#presentationImages");
	presi = 0;
	$(document).keydown(function(e){
		if(e.keyCode == 65 && e.shiftKey) {
			$("#presentation").fadeIn();
			$("body,html").css("overflow","hidden");
			return false;
		}
		if($("#presentation").is(":visible")){
			if (e.keyCode == 37) {  //left
				presentationLeft();
				return false;
			}
			if (e.keyCode == 39) {  //right
				presentationRight();
				return false;
			}
			if (e.keyCode == 27) { //esc
				$("#presentation").fadeOut();
				$("body,html").css("overflow","auto");
			}
		}
	});
	function presentationLeft(){
		$("#presentationImages").find("img").remove();
		if(presi <= 0){
			presi = $("#presentationPool").find("img").length-1;
			$("#presentationPool").find("img").eq(presi).clone().appendTo("#presentationImages");
		}else{
			presi--;
			$("#presentationPool").find("img").eq(presi).clone().appendTo("#presentationImages");
		}
	}
	function presentationRight(){
		$("#presentationImages").find("img").remove();
		if(presi < $("#presentationPool").find("img").length-1){
			presi++;
			$("#presentationPool").find("img").eq(presi).clone().appendTo("#presentationImages");
		}else{
			presi = 0;
			$("#presentationPool").find("img").eq(presi).clone().appendTo("#presentationImages");
		}
	}
}
	})(jQuery);
</script>	<script type='text/javascript' src='http://wangyishu.cc/wp-content/themes/COLr/scripts/retina.js?ver=1.3'></script>
<script type='text/javascript' src='http://wangyishu.cc/wp-includes/js/wp-embed.min.js?ver=4.9.15'></script>
	
</body>
</html>
s